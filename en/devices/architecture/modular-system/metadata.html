<html devsite>
  <head>
    <title>ModuleMetadata</title>
    <meta name="project_path" value="/_project.yaml" />
    <meta name="book_path" value="/_book.yaml" />
  </head>
    {% include "_versions.html" %}
  <body>
  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>
  The ModuleMetadata module contains metadata about the list of modules on a
  given device. The metadata is parsed and cached as soon as the system server
  starts.
</p>

<h2 id="metadata-q">Changes in Android {{ androidQVersionNumber }}</h2>

<p>
  The ModuleMetadata APK contains <code>ModuleInfoProvider</code>, which
  implements the <code>getModuleInfo</code> and <code>getInstalledModules</code>
  methods from the
  <a href="https://developer.android.com/reference/android/content/pm/PackageManager"
  class="external"><code>PackageManager</code></a> API. These methods are backed
  by XML metadata parsed from a module metadata provider package. The package
  name for the module metadata package is stored in the
  <code>config_defaultModuleMetadataProvider</code> config value.
</p>

<p>
  The module metadata provider must contain a <code>&lt;metadata&gt;</code>
  entry for its <code>&lt;application&gt;</code> tag. The metadata entry must
  contain a single key (<code>android.content.pm.MODULE_METADATA</code>) whose
  value is a reference to an XML resource that contains metadata about the list
  of modules on a given device.
</p>

<h2 id="metadata-format">Format and dependencies</h2>

<p>
  The ModuleMetadata module is delivered as an APK file. In the XML document,
  metadata includes a single top-level <code>&lt;module-metadata&gt;</code>
  element with one or more children. Each child is a <code>&lt;module&gt;</code>
  element that contains the following attributes:
</p>

<ul>
  <li><code>name</code> is a resource reference to a user-visible package name.
  Maps to <code>ModuleInfo#getName</code>.</li>
  <li><code>packageName</code> is the package name of the module. Maps to
  <code>ModuleInfo#getPackageName</code>.</li>
  <li><code>isHidden</code> indicates whether the module is hidden. Maps to
  <code>ModuleInfo#isHidden</code>.</li>
</ul>

<p>
  Example:
</p>

<pre class="prettyprint">&lt;module-metadata>
    &lt;module name="@string/resource" packageName="package_name" isHidden="false|true" />
    &lt;module .... />
&lt;/module-metadata>
</pre>

</body>
</html>
