<html devsite>
  <head>
    <title>Core Kernel Requirements</title>
    <meta name="project_path" value="/_project.yaml" />
    <meta name="book_path" value="/_book.yaml" />
  </head>
  {% include "_versions.html" %}
  <body>
  <!--
      Copyright 2017 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->


<p>
  Android 8.0 and higher mandate a minimum kernel version and kernel
  configuration that is verified by the Vendor Test Suite (VTS) and over-the-air
  (OTA) updates. Android device kernels must enable kernel <code>.config</code>
  support and the option to read the kernel configuration at runtime through
  <code>procfs</code>.
</p>

<h2 id="kernel-config-support">Kernel .config support</h2>

<p>
  All device kernels must enable the entirety of
  <a href="https://android.googlesource.com/kernel/common/+/android-4.4/android/configs/android-fetch-configs.sh"
  class="external">android-base.cfg</a>, which must include the following
  kernel-config options (or their kernel-version equivalent):
</p>

<pre class="prettyprint">
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
</pre>

<h2 id="kernel-version">Kernel version</h2>

<p>
  For Android {{ androidPVersionNumber }}, the minimum Long Term Support (LTS)
  kernel version requirements are 4.4.107, 4.9.84, and 4.14.42.
</p>

<ul>
  <li>All system-on-chips (SoCs) productized in 2018 must launch with kernel
  4.9.84 or newer.</li>
  <li>All other SoCs launching Android devices running Android
  {{ androidPVersionNumber }} must use kernel 4.4.107 or higher.</li>
  <li>Device kernels based on 4.14 must include the 4.14.42 or higher LTS
  release.</li>
  <li>Regardless of launch date, all SoCs with device launches on Android 8.0
  and higher remain subject to the kernel changes required to enable Treble.
  </li>
  <li>Older Android devices upgrading to Android 8.0 or higher can continue to
  use their original base kernel version.</li>
</ul>

<p>
  For details on LTS kernels, see
  <a href="/devices/architecture/kernel/releases#long-term-stable-kernels">Long-term
  stable kernels</a> and
  <a href="/devices/architecture/kernel/android-common">Android Common Kernels</a>
</p>

<h2 id="device-tree-support">Devicetree support</h2>

<p>
  If the platform doesn't support <a href="http://www.uefi.org/acpi/specs"
  class="external">Advanced Configuration and Power Interface (ACPI)</a>,
  devicetree support in the kernel must be enabled and bootloaders must pass the
  hardware description in the form of a devicetree to the kernel. The devicetree
  must also be available for Android to read and be able to pass vendor- and
  ODM-specific parameters to Android. <code>CONFIG_OF</code> is mandatory, along
  with all other device- and subsystem-specific <code>CONFIG_OF_*</code> kernel
  config options.
</p>

<h2 id="debugfs">DebugFS</h2>

<p>
  The implementation of the vendor interface shouldn't rely on
  <code>debugfs</code>. It may be enabled, but VTS testing may be done with
  <code>debugfs</code> unmounted.
</p>

</body>
</html>
