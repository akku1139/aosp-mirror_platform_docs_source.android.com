<html devsite>
  <head>
    <title>Restricted Screen Reading</title>
    <meta name="project_path" value="/_project.yaml" />
    <meta name="book_path" value="/_book.yaml" />
  </head>
  {% include "_versions.html" %}
  <body>
  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>In Android 9 and lower, the screen buffer
capture permissions (<code>READ_FRAME_BUFFER</code>,
<code>CAPTURE_VIDEO_OUTPUT</code>, and
<code>CAPTURE_SECURE_VIDEO_OUTPUT</code>) were granted to apps that
had <em>either</em> signature or privileged permissions. This
enabled seamless screen-buffer capturing activities, such as
taking screenshots, or recording a device’s screen contents.</p>

<p>Starting in Android {{ androidQVersionNumber }}, to prevent
silent access to a device’s screen contents, video capture
permissions aren't granted to privileged apps. Access
without user consent is <a href=
"https://developer.android.com/preview/privacy/permissions#screen-contents" class="external">
restricted</a>, and granted only to apps that have signature
permissions. Device manufacturers that run privileged apps relying
on this silent capture functionality are affected by this
requirement.</p>

<p>As of Android {{ androidQVersionNumber }} if you
don’t have the listed screen-buffer capture signature permissions, your
app can’t capture screen buffers without user consent. To
ensure you have the permissions you need, search your manifest file
for the previously listed signature permissions. Migrate all affected privileged
apps (as found in your search) to the <a href=
"https://developer.android.com/reference/android/media/projection/MediaProjectionManager" class="external">
MediaProjectionManager</a> class, which allows any third party app
to capture screen buffers without permissions, but with user
consent. This flow displays a dialog that prompts the user to
allow screen capturing when an app initiates it. In Android {{ androidQVersionNumber }},
new features of the dialog include the following:</p>

<ul>
<li>Provides more visible associations with the <strong>Cast</strong> icon.</li>
<li>Provides more information about the sensitivity of the data
that can be accessed.</li>
<li>Prevents users from hiding the dialog on future initiations: the dialog shows every time.</li>
</ul>
</body>
</html>

