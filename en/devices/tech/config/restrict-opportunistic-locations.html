<html devsite>
  <head>
    <title>Restrict Opportunistic Locations</title>
    <meta name="project_path" value="/_project.yaml" />
    <meta name="book_path" value="/_book.yaml" />
  </head>
  {% include "_versions.html" %}
  <body>
  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>When an app requests a device’s location, it can either wait for
the request response or, by using active location listeners, get an
opportunistic location update. This was available (unrestricted) in
Android 9 and lower, and was provided when an app specified only
the active location update rate, leaving the passive rate blank.
(Passive location listeners don't receive opportunistic location
updates because they don't specify a location update rate.)</p>

<p>Starting in Android {{ androidQVersionNumber }}, to get opportunistic
location updates, developers must specify that they need passive location
updates from the <strong><code><a href=
"https://developers.google.com/android/reference/com/google/android/gms/location
/FusedLocationProviderClient"
class="external">FusedLocationProviderClient</a></code></strong> class.</p>

<h2 id="fusedLocProv">Fused location provider</h2>

<p>Apps can specify the rate at which they get opportunistic location updates from the <code><a href=
"https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderClient" class="external">
FusedLocationProviderClient</a></code> class in two ways.</p>

    <ul>

      <li>Specify a value in the <code><a href=
      "https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setFastestInterval(long)" class="external">
        setFastestInterval</a></code> method that’s lower than the value of the
      <code><a href=
      "https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setInterval(long)" class="external">
      setInterval</a></code> parameter. (Use a value of 0 ms or greater.)</li>

      <li>Let the value be set automatically by leaving <code><a href=
      "https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setFastestInterval(long)" class="external">
      setFastestInterval</a></code> unspecified.</li>
    </ul>

<h2 id="impact">Impact</h2>

<p>If you don't provide a value for <code><a href=
"https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setFastestInterval(long)" class="external">
setFastestInterval</a></code>, your app may experience a significant
reduction in location updates delivered to it.</p>

<h2 id="implementation">Implementation</h2>

<p>You don’t need to do anything to implement this feature other
than to use the suggested values for the <code><a href=
"https://developers.google.com/android/reference/com/google/android/gms/location
/FusedLocationProviderClient"
                      class="external">FusedLocationProviderClient</a></code> class <code><a href=
      "https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setFastestInterval(long)" class="external">
        setFastestInterval</a></code> method.</p>

  </body>
</html>
