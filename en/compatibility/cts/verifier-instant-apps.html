<html devsite>
  <head>
    <title>CTS Verifier for Instant Apps</title>
    <meta name="project_path" value="/_project.yaml" />
    <meta name="book_path" value="/_book.yaml" />
  </head>
  <body>
  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->



<p>
CTS Verifier for Instant Apps increases Android Compatibility test coverage for Instant
Apps by using CTS Verifier to test features that can't be fully automated due to OEM-
specific UIs, such as system UIs.
</p>

<h3 id="requirements">Requirements</h3>

<p>
Before running CTS Verifier for Instant Apps, ensure that you have the following equipment:
</p><ul>

<li>Android device that has verified Android API compatibility by successfully passing the
CTS. This is the device-under-test (DUT).
<li>Linux computer with USB 2.0 compatible port. All connections to the DUT are
through this port.
</li></ul>

<h3 id="installing-instant-app-on-dut">Installing Instant App on DUT</h3>

<p>
<code>CtsVerifierInstantApp.apk</code> and the CTS verifier are included in
<code>android-cts-verifier.zip</code>, which can be found by logging in to the <a href=
    "https://partner.android.com/build/builds;branch=git_qt-release;product=aosp_arm?a=1016313942" class="external">
    Q-EAP dashboard</a>.
</p>
<p>

<p>
  <img src="images/CTS_Verifier_Instant1.png" alt="Test initiation" width ="500" id="instant1"/>
  <p class="img-caption">
    <strong>Figure 1.</strong> Installing Instant App on DUT
</p>

<p>
The partners can manually build the CTS Verifier to <a href=
"/compatibility/cts/development" class="external">build CTS</a> to incorporate or test out new fixes.
To manually build <code>CtsVerifierInstantApp.apk</code>. issue the following command on the host:
</p>

<pre class="devsite-terminal devsite-click-to-copy">make CtsVerifierInstantApp</pre>

<p>
To install <code>CtsVerifierInstantApp.apk</code>, issue the following commands on host.
</p>

<pre class="devsite-terminal devsite-click-to-copy">adb install -r --instant CtsVerifierInstantApp.apk</pre>


<pre class="devsite-terminal devsite-click-to-copy">adb install -r --instant /path/to/CtsVerifierInstantApp.apk</pre>

<h3 id="running">Running</h3>

<p>
The three system UI tests are displayed in the home screen under the Instant Apps test category.
</p>
<p>

<p>
  <img src="images/CTS_Verifier_Instant2.png" alt="Test initiation" width ="500" id="instant2"/>
  <p class="img-caption">
    <strong>Figure 2.</strong> Home screen
</p>

<p>
When you tap a test under the Instant Apps test category, a test screen opens for the test.
The test screen contains the following:
</p><ul>

<li>Instructions
<li><strong>Start Test</strong> button
<li>Three standard CTS Verifier buttons  <ul>

 <li>Pass
 <li>Help
 <li>Fail </li> </ul>
</li> </ul>

<p>
Tapping the <strong>Start Test</strong> button launches the sample Instant App.
</p>

<p>
  <img src="images/CTS_Verifier_Instant3.png" alt="Test initiation" width ="300" id="instant3"/>
  <p class="img-caption">
    <strong>Figure 3.</strong> Test screen
</p>

<p>
The first time you tap the <strong>Start Test</strong>, an alert
dialog opens with instructions for installing the sample Instant App (Figure 4).
If the sample Instant App is already installed, this dialog isn't shown
for other instant app tests.
</p>

<p>
  <img src="images/CTS_Verifier_Instant4.png" alt="Test initiation" width ="300" id="instant4"/>
  <p class="img-caption">
    <strong>Figure 4.</strong> Install instruction dialog
</p>

<p>
Tapping the <strong>Help</strong> button opens a pop-up dialog with description of the test.
</p>

<p>
  <img src="images/CTS_Verifier_Instant5.png" alt="Test initiation" width ="300" id="instant5"/>
  <p class="img-caption">
    <strong>Figure 5.</strong> Help pop-up dialog
</p>

</body>
</html>
