<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>
<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<h1 id="pass_options_to_suite_and_modules" class="page-title">将选项传递给套件和模块</h1>

<p>首先，确保您了解 Tradefed 中的<a href="/devices/tech/test_infra/tradefed/fundamentals/options">选项处理</a>。</p>

<p><a href="setup.md">套件设置</a>介绍了套件结构中存在的两个层：</p>

<ul>
<li>顶级套件</li>
<li>模块</li>
</ul>

<p>在非套件 Tradefed 环境中，不需要考虑选项的传递，因为每个选项都会得到完全调用。在套件环境中，模块与套件保持隔离，所以并非所有选项都在它们的级别上可用。</p>

<h2 id="pass_options_to_the_top-level_suite">将选项传递给顶级套件</h2>

<p>顶级套件的行为方式类似于标准 Tradefed 配置：完整的配置（包括套件运行程序）将接收所有选项，就像非套件 Tradefed 配置一样。</p>

<h2 id="pass_options_to_the_modules">将选项传递给模块</h2>

<p>默认情况下，模块不会接收传递给命令的任何选项。<em></em>需要通过 <code>module-arg</code> 选项来明确定位模块以接收选项。模块选项的这种隔离使调试变得更容易。</p>

<p>示例：</p>
<pre class="prettyprint lang-shell"><code>cts-tradefed run cts --module-arg &lt;module-name&gt;:&lt;option-name&gt;:&lt;option-value&gt;

cts-tradefed run cts --module-arg CtsGestureTestCases:collect-tests-only:true
</code></pre>
<p>该语法可确保定位的模块将接收给定的选项。</p>

<p>还有其他方法可以将选项传递给模块，如 <code>test-arg</code>，它允许您根据运行程序类型或类，将选项传递给每个模块的测试运行程序。</p>

<p>示例：</p>
<pre class="prettyprint lang-shell"><code>cts-tradefed run cts --test-arg &lt;test-class&gt;:&lt;option-name&gt;:&lt;option-value&gt;

cts-tradefed run cts --test-arg com.android.tradefed.testtype.JarHosttest:collect-tests-only:true
</code></pre>
<p>该语法不是针对特定模块，而是针对给定类的所有测试运行程序。<code>test-arg</code> 只将 <a href="/reference/tradefed/com/android/tradefed/testtype/IRemoteTest">IRemoteTest</a> 实现视为选项的潜在接收者。</p>

</body></html>