<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>
<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<h1 id="device_allocation_in_tradefed" class="page-title">Tradefed 中的设备分配</h1>

<p>在开始测试（例如插桩测试）时，可能需要分配有设备，测试才能正常运行。有些测试（如一些 Java 单元测试）可能根本不需要设备。还有一些测试（如手机 + 手表测试）甚至可能需要多部设备。在所有这些情况下，都由设备管理器负责将所需设备分配给测试，以使其正常运行。我们将此阶段称为“设备分配”或“设备选择”步骤。<em></em><em></em></p>

<p>分配由 <a href="https://android.googlesource.com/platform/tools/tradefederation/+/refs/heads/master/src/com/android/tradefed/device/DeviceSelectionOptions.java">DeviceSelectionOptions</a> 驱动，允许测试声明它需要来自设备的任何属性，包括：</p>

<ul>
<li>电池电量</li>
<li>设备类型</li>
<li>产品类型</li>
<li>序列号</li>
</ul>

<p>以及其他更多。</p>

<h2 id="using_real_devices">使用真实设备</h2>

<p>这是将分配给未指定任何设备属性的所有测试的默认设置。系统将选取标记为 <a href="/devices/tech/test_infra/tradefed/architecture/device-manager#allocation_states">AVAILABLE</a> 的随机物理设备，并将其分配给测试。</p>

<h2 id="using_no_devices">不使用任何设备</h2>

<p>如果测试不需要任何设备，则可以在其命令行中指定 <code>--null-device</code> 或 <code>-n</code>，或者在其配置 XML 中指定 <code>&lt;option name="null-device" value="true" /&gt;</code>。这样将分配一个存根占位符 NullDevice，表示未分配任何设备。</p>

</body></html>