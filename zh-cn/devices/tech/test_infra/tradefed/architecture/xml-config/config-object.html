<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>
<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<h1 id="tradefed_configuration_object" class="page-title">Tradefed 配置对象</h1>

<p>系统将解析 <a href="/devices/tech/test_infra/tradefed/architecture/xml-config">Tradefed XML 配置</a>，并根据它创建一个 <code>Configuration</code> 对象，用来描述完整的配置。</p>

<p>该对象由 <a href="https://android.googlesource.com/platform/tools/tradefederation/+/refs/heads/master/src/com/android/tradefed/config/IConfiguration.java">IConfiguration 接口</a>进行描述。它将包含 XML 中定义的所有对象的一个实例。</p>

<p>以下示例：</p>
<pre class="prettyprint lang-xml"><code>&lt;configuration description="&lt;description of the configuration&gt;"&gt;
    &lt;!-- A build provider that takes local device information --&gt;
    &lt;build_provider class="com.android.tradefed.build.BootstrapBuildProvider" /&gt;

    &lt;!-- Some target preparation, disabled by default --&gt;
    &lt;target_preparer class="com.android.tradefed.targetprep.PreloadedClassesPreparer"&gt;
        &lt;option name="disable" value="true" /&gt;
    &lt;/target_preparer&gt;

    &lt;!-- One test running some unit tests --&gt;
    &lt;test class="com.android.tradefed.testtype.HostTest"&gt;
        &lt;option name="class" value="com.android.tradefed.build.BuildInfoTest" /&gt;
    &lt;/test&gt;
&lt;/configuration&gt;
</code></pre>
<p>将导致：</p>

<ul>
<li><code>IConfiguration#getBuildProvider()</code> 返回一个 <code>BootstrapBuildProvider</code> 实例。</li>
<li><code>IConfiguration#getTargetPreparers()</code> 返回包含一个 <code>PreloadedClassesPreparer</code> 实例的 <code>ITargetPreparer</code> 的列表。</li>
<li><code>IConfiguration#getTests()</code> 返回包含一个 <code>HostTest</code> 实例的 <code>IRemoteTest</code> 的列表。</li>
</ul>

<p>配置对象中的每个对象均可映射到 XML 定义，因此理解 XML 定义通常有助于理解配置对象会返回什么内容。</p>

</body></html>