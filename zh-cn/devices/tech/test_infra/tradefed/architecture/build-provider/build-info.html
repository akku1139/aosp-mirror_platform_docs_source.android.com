<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>
<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<h1 id="build_info_in_tradefed" class="page-title">Tradefed 中的版本信息</h1>

<p>TF 中的<a href="https://android.googlesource.com/platform/tools/tradefederation/+/refs/heads/master/src/com/android/tradefed/build/BuildInfo.java">版本信息</a>是一个广泛使用的对象，用于承载测试设置和运行的资源。从设备映像到测试 APK 的所有内容都需要存储或链接在版本信息中才能找到。这允许以一种统一的方式从测试访问测试资源，并将测试与获取测试资源分离开来。</p>

<h2 id="build_info_properties">版本信息属性</h2>

<p>版本信息对象的两个主要属性是属性和文件：</p>

<ul>
<li>属性 - 可以通过 <code>#addBuildAttribute()</code> 添加；它们表示版本的标签和字符串信息。<em></em>属性可用于存储与版本相关的信息。</li>
<li>文件 - 可以通过 <code>setFile()</code> 添加；在调用生命周期内，文件将由版本信息进行跟踪和管理（例如，在分片期间正确处理）。<em></em>这样一来，测试就不需要了解关于文件系统的任何信息，而是可以直接依赖抽象的版本信息对象来获取其资源。</li>
</ul>

<p>注意：文件应以绝对路径的形式始终存储在 <code>Files</code> 中，而不是存储在 <code>Attributes</code> 中。属性被视为纯 java 字符串，而引用可能会在调用生命周期的部分时间失效。</p>

<h2 id="build_info_in_multi-devices">多设备中的版本信息</h2>

<p>如果设置的测试配置涉及多个设备，每个设备将存在一个版本信息对象。这允许在设备之间请求和定位文件。</p>

<h2 id="build_info_in_multi-builds">多版本中的版本信息</h2>

<p>可能需要来自多个目标的版本。在这种情况下，每个目标将存在一个版本信息对象。这允许从任何目标请求和定位文件。</p>

<h2 id="proto_format">Proto 格式</h2>

<p>版本信息可采用 protobuf 格式序列化，以便在需要时更容易跨系统使用。</p>

</body></html>