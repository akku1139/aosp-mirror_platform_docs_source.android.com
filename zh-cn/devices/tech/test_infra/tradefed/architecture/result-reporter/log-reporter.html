<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>
<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<h1 id="handling_log_files_from_a_result_reporter" class="page-title">处理结果报告程序中的日志文件</h1>

<p>在某些情况下，只能访问测试结果还不够，必须具有日志文件才能让总体结果变得完整。</p>

<h2 id="log_interface">日志接口</h2>

<p>任何结果报告程序或<a href="/devices/tech/test_infra/tradefed/architecture/result-reporter#core_interface">测试事件</a>均可通过实现 <a href="https://android.googlesource.com/platform/tools/tradefederation/+/refs/heads/master/src/com/android/tradefed/result/ILogSaverListener.java">ILogSaverListener</a> 来访问日志，该接口允许报告程序通过不同的回调来接收日志：</p>

<ul>
<li><code>testLogSaved</code>：在记录文件时立即调用。这会通知记录了新文件。随时都会调用此事件。</li>
<li><code>logAssociation</code>：按测试事件的顺序调用。这可确保正在记录的文件与正在进行的事件之间存在很强的关联。</li>
</ul>

<p>通过实现此接口，结果报告程序可以访问记录的文件引用并使用这些引用。</p>

<h2 id="when_to_use_logassociation">何时使用 logAssociation</h2>

<p><code>logAssociation</code> 是一个稍微有些复杂的事件，因为它依赖于事件的上下文才能得到正确解释。例如，如果已调用 <code>testStart</code>，那么来自 <code>logAssociation</code> 的日志将属于正在进行的测试用例。</p>

<p>利用这种强大的关联，可以正确放置日志。</p>

</body></html>