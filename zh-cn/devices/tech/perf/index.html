<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>
<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<h1 id="android_performance_optimization" class="page-title">Android 性能优化</h1>

<p>请按照本部分中的说明操作，以确保您的 Android 设备能够最大限度地减少资源消耗并优化性能。您可以使用<a href="/devices/tech/debug/eval_perf">评估性能</a>中所述的多种测试和工具来充分利用 Android。</p>

<h2 id="apk_caching">APK 缓存</h2>

<p>本文档介绍了如何设计 APK 缓存解决方案，以在支持 A/B 分区的设备上快速安装预加载的应用。OEM 可以将预加载应用和热门应用放置在 APK 缓存中（对于采用 A/B 分区的新设备而言，这种缓存会存储在通常为空的 B 分区中），而且这样不会影响面向用户的任何数据空间。</p>

<h2 id="boot_times">启动时间</h2>

<p>Android 8.0 支持一系列组件的多项改进，因而可以缩短启动时间。本文档提供了有关缩短特定 Android 设备的启动时间的合作伙伴指南。</p>

<h2 id="health">运行状况</h2>

<p>Android 9 引入了从 health@1.0 HAL 升级的主要版本 <code>android.hardware.health</code> HAL 2.0。这一新版 HAL 使框架代码和供应商代码之间的区别更加清楚，供应商对运行状况信息报告进行自定义的自由度更高，并提供了更多设备运行状况信息（不仅包括电池信息）。</p>

<h2 id="lowmemorykiller">lowmemorykiller</h2>

<p>用户空间 <code>lmkd</code> 进程可实现相同的功能，但它通过现有的内核机制检测和估测内存压力。该进程使用内核生成的 vmpressure 事件来获取关于内存压力级别的通知。</p>

<h2 id="low_ram">低内存</h2>

<p>Android 支持内存只有 512MB 的设备。本文档旨在帮助 OEM 优化和配置 Android，使其能够在低内存设备上运行。</p>

<h2 id="profile-guided_optimization">配置文件引导的优化</h2>

<p>Android 编译系统支持在具有蓝图编译规则的原生 Android 模块上使用 Clang 的配置文件引导优化 (PGO)。</p>

<h2 id="task_snapshots">任务快照</h2>

<p>任务快照是在 Android O 中引入的基础架构，可将窗口管理器中的最近任务缩略图和已保存 Surface 这两者的屏幕截图进行合并。最近任务缩略图会在“最近”视图中呈现任务的最后状态。</p>

<h2 id="write-ahead_logging">预写日志记录</h2>

<p>Android 9 引入了一种特殊模式的 SQLiteDatabase，称为“兼容性 WAL（预写日志记录）”，它允许数据库使用 <code>journal_mode=WAL</code>，同时保留每个数据库最多创建一个连接的行为。</p>

</body></html>