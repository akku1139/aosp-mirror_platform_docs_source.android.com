<html devsite><head>
    <title>链接器命名空间</title>
    <meta name="project_path" value="/_project.yaml"/>
    <meta name="book_path" value="/_book.yaml"/>
  </head>
  <body>
  <!--
      Copyright 2017 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>链接器命名空间是一种控制共享库搜索路径以及打开目录中库的权限的机制。</p>

<h2 id="framework-processes">框架进程</h2>
<h3 id="default-namespace">默认命名空间</h3>
<p>搜索路径和允许的路径：</p>
<ol>
<li><code>/system/lib[64]</code></li>
<li><code>/vendor/lib[64]</code> # 在 Android O 中已弃用（仅适用于旧版模块）</li>
</ol>

<h3 id="sp-hal-namespace">SP-HAL 命名空间</h3>
<p>搜索路径和允许的路径：</p>
<ol>
<li><code>/vendor/lib[64]/egl</code></li>
<li><code>/vendor/lib[64]/hw</code></li>
<li><code>/vendor/lib[64]</code></li>
</ol>

<p>从其他命名空间导入的共享库：</p>
<ul>
<li>由<strong>默认</strong>命名空间导出的库：
 <ul>
 <li>LL-NDK：<code>libc.so</code>、<code>libm.so</code>、<code>libdl.so</code>、<code>libstdc++.so</code>、<code>liblog.so, libz.so</code></li>
 <li>SP-NDK：<code>libEGL.so</code>、<code>libGLESv1_CM.so</code>、<code>libGLESv2.so</code>、<code>libnativewindow.so</code>、<code>libsync.so</code>、<code>libvndksupport.so</code></li>
 </ul>
</li>
<li>由 <strong>vndk</strong> 命名空间导出的库：<code>android.hardware.renderscript@1.0.so</code>、<code>android.hardware.graphics.allocator@2.0.so</code>、<code>android.hardware.graphics.mapper@2.0.so</code>、<code>android.hardware.graphics.common@1.0.so</code>、<code>libhwbinder.so</code>、<code>libbase.so</code>、<code>libcutils.so</code>、<code>libhardware.so</code>、<code>libhidlbase.so</code>、<code>libhidltransport.so</code>、<code>libutils.so</code>、<code>libc++.so</code>
</li>
<li>由 <strong>rs</strong> 命名空间导出的库：<code>libRS_internal.so</code>
</li>
</ul>

<h3 id="vndk-vndk-sp-namespace">VNDK (VNDK-SP) 命名空间</h3>
<p>搜索路径：</p>
<ol>
<li><code>/vendor/lib[64]/vndk-sp</code></li>
<li><code>/system/lib[64]/vndk-sp</code></li>
<li><code>/vendor/lib[64]</code></li>
</ol>

<p>允许的路径：</p>
<ul>
<li><code>/vendor/lib[64]/vndk-sp</code></li>
<li><code>/system/lib[64]/vndk-sp</code></li>
<li><code>/vendor/lib[64]</code></li>
<li><code>/vendor/lib[64]/hw</code></li>
<li><code>/vendor/lib[64]/egl</code></li>
</ul>

<p>从其他命名空间导入的共享库：</p>
<ul>
<li>由<strong>默认</strong>命名空间导出的库：
 <ul>
 <li>LL-NDK：<code>libc.so</code>、<code>libm.so</code>、<code>libdl.so</code>、<code>libstdc++.so</code>、<code>liblog.so</code>、<code> libz.so</code>
  </li><li>SP-NDK：<code>libEGL.so</code>、<code>libnativewindow.so</code>、<code>libsync.so</code>、<code>libvndksupport.so</code>
  </li>
  </ul>
</li>
</ul>

<h3 id="rs-namespace">RS 命名空间</h3>
<p>此特殊命名空间允许 <code>libRS_internal.so</code> 使用 <code>libmediandk.so</code>，从 SP-HAL 命名空间或 VNDK-SP 命名空间则无法访问此项（这是 Android O 中的一项缓和机制）。</p>

<p>搜索路径：</p>
<ol>
<li><code>/vendor/lib[64]/vndk-sp</code></li>
<li><code>/system/lib[64]/vndk-sp</code></li>
<li><code>/vendor/lib[64]</code></li>
</ol>

<p>允许的路径：</p>
<ul>
<li><code>/vendor/lib[64]/vndk-sp</code></li>
<li><code>/system/lib[64]/vndk-sp</code></li>
<li><code>/vendor/lib[64]</code></li>
<li><code>/data</code> # 共享库由 RS CPU 参考实现进行 JIT 编译</li>
</ul>

<p>从其他命名空间导入的共享库：</p>
<ul>
<li>由<strong>默认</strong>命名空间导出的库
 <ul>
 <li>LL-NDK：<code>libc.so</code>、<code>libm.so</code>、<code>libdl.so</code>、<code>libstdc++.so</code>、<code>liblog.so</code></li>
 <li>SP-NDK：<code>libEGL.so</code>、<code>libGLESv1_CM.so</code>、<code>libGLESv2.so</code>、<code>libnativewindow.so</code>、<code>libsync.so</code>、<code>libvndksupport.so</code></li>
 <li>其他库：<code>libmediandk.so</code>、<code>libui.so</code></li>
 </ul>
</li>
<li>由 <strong>vndk</strong> 命名空间导出的库：<code>android.hardware.renderscript@1.0.so</code>、<code>android.hardware.graphics.allocator@2.0.so</code>、<code>android.hardware.graphics.mapper@2.0.so</code>、<code>android.hardware.graphics.common@1.0.so</code>、<code>libhwbinder.so</code>、<code>libbase.so</code>、<code>libcutils.so</code>、<code>libhardware.so</code>、<code>libhidlbase.so</code>、<code>libhidltransport.so</code>、<code>libutils.so</code>、<code>libc++.so</code></li>
</ul>

<h2 id="vendor-processes">供应商进程</h2>
<h3 id="default-linker-namespace">默认链接器命名空间</h3>
<p>搜索路径和允许的路径：</p>
<ol>
<li><code>/vendor/lib[64]</code></li>
<li><code>/vendor/lib[64]/vndk-sp</code></li>
<li><code>/system/lib[64]/vndk-sp</code></li>
<li><code>/system/lib[64]</code> # 适用于已退化的 VNDK 库</li>
</ol>

</body></html>