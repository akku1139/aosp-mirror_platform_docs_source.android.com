<html devsite><head>
    <title>核心内核要求</title>
    <meta name="project_path" value="/_project.yaml"/>
    <meta name="book_path" value="/_book.yaml"/>
  </head>
  <body>

  <!--
      Copyright 2017 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>Android 8.0 及更高版本指定了最低内核版本和内核配置，并由供应商测试套件 (VTS) 和无线下载 (OTA) 更新对其进行验证。Android 设备内核必须启用内核 <code>.config</code> 支持以及在运行时通过 <code>procfs</code> 读取内核配置的选项。
</p>

<h2 id="kernel-config-support">内核 .config 支持</h2>

<p>所有设备内核都必须完整启用 <a href="https://android.googlesource.com/kernel/common/+/android-4.4/android/configs/android-fetch-configs.sh" class="external">android-base.cfg</a>，其中必须包含以下内核配置选项（或其内核版本等效选项）：</p>

<pre class="prettyprint">
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
</pre>

<h2 id="kernel-version">内核版本</h2>

<p>对于 Android 9，要求的最低长期支持 (LTS) 内核版本是 4.4.107、4.9.84 和 4.14.42。
</p>

<ul>
  <li>2018 年生产的所有系统芯片 (SoC) 在推出时都必须采用 4.9.84 版或更高版本的内核。</li>
  <li>所有其他 SoC 在推出搭载 Android 9 的 Android 设备时，都必须使用 4.4.107 版或更高版本的内核。</li>
  <li>基于 4.14 的设备内核必须包含 4.14.42 或更高版本的 LTS。</li>
  <li>发布搭载 Android 8.0 及更高版本的设备时，所有 SoC 仍然需要遵循启用 Treble 所需的内核更改要求，无论发布日期是什么时候。
  </li>
  <li>要升级到 Android 8.0 或更高版本的早期 Android 设备可以继续使用原来的基础内核版本。</li>
</ul>

<p>要详细了解 LTS 内核，请参阅<a href="/devices/architecture/kernel/releases#long-term-stable-kernels">长期稳定的内核</a>和 <a href="/devices/architecture/kernel/android-common">Android 通用内核</a>
</p>

<h2 id="device-tree-support">设备树支持</h2>

<p>如果平台不支持<a href="http://www.uefi.org/acpi/specs" class="external">高级配置与电源接口 (ACPI)</a>，则内核中必须启用设备树支持，且引导加载程序必须将硬件描述以设备树的形式传递给内核。设备树还必须可供 Android 读取，且能够将供应商和 ODM 特有的参数传递给 Android。<code>CONFIG_OF</code> 以及所有其他设备和子系统专属的 <code>CONFIG_OF_*</code> 内核配置选项都是强制性的选项。
</p>

<h2 id="debugfs">DebugFS</h2>

<p>供应商接口的实现不应依赖 <code>debugfs</code>，您可以启用 debugfs，但在不装载 <code>debugfs</code> 的情况下也可以完成 VTS 测试。
</p>

</body></html>