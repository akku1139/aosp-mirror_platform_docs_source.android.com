<html devsite><head>
    <title>受保护的确认</title>
    <meta name="project_path" value="/_project.yaml"/>
    <meta name="book_path" value="/_book.yaml"/>
  </head>
  <body>

  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->
<img src="/security/images/androidProtectedConfirmationOverview.png" class="attempt-right"/>

<p>Android 受保护的确认利用受硬件保护的界面（称为<strong>可信界面</strong>），以便重要交易具有高可信度。搭载 Android 9（API 级别 28）或更高版本的受支持设备可以使用 Android 受保护的确认功能。</p>

<p>当应用调用受保护的确认时，可信界面会提示用户确认。即使 Android 或其内核 (Linux) 受到攻击，可信界面也可断言用户对提示消息的批准具有高可信度。此断言将与 Keymaster 一同传递给远程第三方。</p>

<p>开发者可以访问 <a href="https://developer.android.com/training/articles/security-android-protected-confirmation">developer.android.com</a>，查看 Android 受保护的确认开发者文档。</p>

<h2 id="scope">作用域</h2>
<p>Android 受保护的确认的实现可以分为两部分，这两部分均位于可信执行环境 (TEE) 中。一部分是 <a href="https://source.android.com/security/keystore">Keymaster</a> 的扩展程序。通过它，可以生成带有使用要求 <code><a href="https://source.android.google.cn/reference/hidl/android/hardware/keymaster/4.0/types#tag">Tag::TRUSTED_CONFIRMATION_REQUIRED</a></code> 的密钥。另一部分是称为 <strong>ConfirmationUI</strong> 的应用，用于生成“确认”令牌。这些令牌都是加密语句，系统会在用户确认给定消息时将其传递给 Keymaster。本文档介绍了 ConfirmationUI 的实现以及传递给 Keymaster 的确认语句。</p>

</body></html>