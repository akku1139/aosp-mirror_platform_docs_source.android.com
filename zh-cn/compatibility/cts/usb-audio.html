<html devsite><head>
    <title>USB 音频 CTS 验证程序测试</title>
    <meta name="project_path" value="/_project.yaml"/>
    <meta name="book_path" value="/_book.yaml"/>
  </head>
  <body>
  <!--
      Copyright 2017 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>
针对 <a href="/devices/audio/usb">Android USB 音频</a>的几项 <a href="/compatibility/cts/">Android 兼容性测试套件 (CTS)</a> 测试需要人为干预并连接 USB 音频外设。我们为此实现了额外的 CTS 验证程序测试。
本文档介绍了这些测试的要求和协议。
</p>

<h2 id="nomenclature">术语</h2>

<p>
在本文档中，术语“设备”和“外设”的使用方式非常明确：
</p>
<ul>
<li><em></em>“设备”是指 Android 设备。</li>
<li><em></em>“外设”指的是连接到 Android 设备的外部 USB 音频外设。</li>
</ul>

<h2 id="recommended-peripherals">指定外设</h2>

<p>
为了使 USB 音频 CTS 验证程序测试了解它们正在验证的属性和功能，您需要指定一组已知的外设作为测试依据。因此，下面指定了一些特定品牌和类型。要成功完成这些测试，您使用的每个外设都必须属于下文指定的外设类别中的一种。使用其他类型将导致测试失败。
</p>

<h3 id="usb-audio-interface">USB 音频接口</h3>

<p>请使用以下任一外设进行 USB 音频外设属性测试、播放测试和录制测试：</p>

<ul>
  <li><a href="http://www.presonus.com/products/audiobox-22VSL">Presonus AudioBox 22VSL</a></li>
  <li><a href="https://www.presonus.com/products/audiobox-usb">Presonus AudioBox USB</a></li>
</ul>

<table>
  <tbody><tr>
   <td width="50%">USB 音频接口 (PreSonus AudioBox 22VSL)
   </td>
   <td width="50%"><img src="/compatibility/cts/images/usb_audio_interface.png" alt="USB 音频接口" width="300" id="usb_audio_interface"/></td>
  </tr>
</tbody></table>

<h3 id="usb-headset">USB 耳机</h3>

<p>您可以使用数字 <a href="https://www.amazon.com/gp/product/B06VVGR2XM/ref=oh_aui_detailpage_o06_s00?ie=UTF8&psc=1">JBL Reflect Aware C 入耳式运动耳机</a>进行 USB 音频外设播放测试和耳机按钮测试，而无需使用适配器。</p>

<p>否则，请使用以下任一数字 USB-C 转 3.5 毫米音频耳机插孔适配器：

</p><ul>
  <li><a href="https://store.google.com/us/product/usb_c_headphone_adapter">Google 数字 USB-C 转 3.5 毫米头戴式耳机适配器</a></li>
  <li><a href="https://www.htc.com/us/accessories-b/#!pid=htc-u11&acc=usb-c-digital-to-3-5mm-htc-u11">HTC 数字 USB-C 转 3.5 毫米音频耳机插孔适配器</a></li>
</ul>

<p>请将以上任一适配器连接到任一兼容 Android 的模拟耳机，以进行 USB 音频外设播放测试和耳机按钮测试：</p>

<ul>
  <li><a href="https://www.bose.com/en_us/products/headphones/earphones/soundsport-in-ear-headphones-samsung-devices.html">Bose SoundSport® 入耳式耳机 – Samsung 和 Android™ 设备</a></li>
  <li><a href="https://www.urbanears.com/ue_us_en/reimers#reimers-black-belt">专为 Android 设备打造的 UrbanEars Reimers Black Belt</a></li>
</ul>

<table>
  <tbody><tr>
   <td width="50%">USB 耳机
   </td>
    <td width="50%"><img src="/compatibility/cts/images/usb_headset.png" alt="USB 耳机" width="300" id="usb_headset"/></td>
  </tr>
</tbody></table>

<h3 id="peripheral-profiles">外设配置文件</h3>

<p>
USB 音频 CTS 验证程序测试通过 Android 提供的内置配置文件（其中说明了外设的属性和功能）来“了解”这些推荐的外设。当外设连接到受测 Android 设备时，系统会自动选择正确的配置文件。
</p>

<h2 id="required-additional-hardware">所需的其他硬件</h2>

<p>跳线（用作回环）
2 条 ¼" 阳头接 ¼" 阳头的短跳线，用来连接 USB 的输出端和输入端</p>

<table>
  <tbody><tr>
   <td width="50%">
   ¼" 阳头接 ¼" 阳头跳线
   </td>
      <td width="50%"><img src="/compatibility/cts/images/patch_cables.png" alt="跳线" width="300" id="patch_cables"/></td>

  </tr>
</tbody></table>

<p>USB 外设数据线</p>

<table>
  <tbody><tr>
   <td width="50%">此数据线（通常随附于外设）可将 USB 音频外设连接到主机设备
   </td>

      <td width="50%"><img src="/compatibility/cts/images/peripheral_cable.png" alt="外设数据线" width="300" id="peripheral_cable"/></td>

  </tr>
</tbody></table>

<p>USB On The Go (OTG) 适配器</p>

<table>
  <tbody><tr>
   <td width="50%">需要使用 USB On The Go (OTG) 适配器才能将外设连接到 Android 设备，并向 Android 设备指明它应该承担“主机”的角色
   </td>

      <td width="50%"><img src="/compatibility/cts/images/otg_adapter.png" alt="OTG 适配器" width="300" id="otg_adapter"/></td>

  </tr>
</tbody></table>

<p>模拟耳机用于在播放测试中监测 USB 音频接口的输出。</p>

<table>
  <tbody><tr>
   <td width="50%">一副模拟耳机。
   </td>

      <td width="50%"><img src="/compatibility/cts/images/analog_headphones.png" alt="模拟耳机" width="300" id="analog_headphones"/></td>

  </tr>
</tbody></table>

<h2 id="tests">测试</h2>

<p>
在每项测试中，请通过点击 <strong>test pass</strong>（对勾标记）按钮来表示测试成功。另外，请通过点击 <strong>test fail</strong>（感叹号）按钮来表示测试失败。
</p>

<h3 id="attributes-test">属性测试</h3>

<h4 id="abstract">概要</h4>

<p>
此测试会验证相关属性（支持的采样率、声道配置、采样格式等）是否与设备的已知先验属性集相匹配。
</p>

<h4 id="process">流程</h4>

<p>
从主菜单中调用此测试后，请连接 USB 音频外设。如果这些属性相匹配，则系统将启用 <strong>test pass</strong>（对勾标记）按钮。点击 <strong>test pass</strong> 按钮即可表示成功。如果这些属性不匹配，请通过点击 <strong>test fail</strong>（感叹号）按钮来表示测试失败。
</p>

<table>
  <tbody><tr>
   <td width="50%">选择“USB Audio Peripheral Attributes Test”。<em></em>
   </td>
      <td width="50%"><img src="/compatibility/cts/images/attributes_test.png" alt="属性测试" width="300" id="attributes test"/></td>
  </tr>
  <tr>
   <td width="50%">显示的说明摘要
   </td>
      <td width="50%"><img src="/compatibility/cts/images/attributes_summary.png" alt="属性摘要" width="300" id="attributes_summary"/></td>
  </tr>
  <tr>
   <td width="50%">建立连接前的屏幕
   </td>
      <td width="50%"><img src="/compatibility/cts/images/attributes_preconnect.png" alt="属性（建立连接前）" width="300" id="attributes_preconnect"/></td>
  </tr>
  <tr>
   <td width="50%">USB 音频外设已通过外设数据线和 OTG 适配器连接到 Android 设备
   </td>
      <td width="50%"><img src="/compatibility/cts/images/attributes_connected.png" alt="属性（已连接）" width="300" id="attributes_connected"/></td>
  </tr>
  <tr>
   <td width="50%">建立连接后的屏幕
   </td>
      <td width="50%"><img src="/compatibility/cts/images/attributes_postconnect.png" alt="属性（建立连接后）" width="300" id="attributes_postconnect"/></td>
  </tr>
</tbody></table>

<h3 id="play-test">播放测试音轨</h3>

<h4 id="abstract">概要</h4>

<p>
此测试会验证音频播放是否正常。为实现此目的，它会生成 1KHz 测试音调，然后采用立体声（双声道）将其传送到 USB 音频外设。
</p>

<h4 id="process">流程</h4>

<p>
从主菜单中调用此测试后，将 USB 音频接口（包括模拟耳机）连接到用于监测的接口上的耳机输出插孔。
</p>

<p>
按 <strong>PLAY</strong> 按钮。如果在耳机的两个声道中都能听到测试音调，请通过点击 <strong>test pass</strong>（对勾标记）按钮来表示测试通过。如果其中任一声道（或两个声道都）无法播放音调，请通过点击 <strong>test fail</strong>（感叹号）按钮来表示测试失败。
</p>

<h4 id="notes">备注</h4>

<table>
  <tbody><tr>
   <td width="50%">选择“USB Audio Peripheral Play Test”<em></em>
   </td>
      <td width="50%"><img src="/compatibility/cts/images/play_test.png" alt="播放测试" width="300" id="play_test"/></td>
  </tr>
  <tr>
   <td width="50%">显示的说明摘要
   </td>
      <td width="50%"><img src="/compatibility/cts/images/play_summary.png" alt="播放摘要" width="300" id="play_summary"/></td>
  </tr>
  <tr>
   <td width="50%">建立连接前的屏幕
   </td>
      <td width="50%"><img src="/compatibility/cts/images/play_preconnect.png" alt="播放（建立连接前）" width="300" id="play_preconnect"/></td>
  </tr>
  <tr>
   <td width="50%">将 USB 音频外设连接到 Android 设备
<p>
耳机已连接到用于监测的 USB 音频接口上的耳机输出插孔。
   </p></td>
      <td width="50%"><img src="/compatibility/cts/images/play_connected.png" alt="播放（已连接）" width="300" id="play_connected"/></td>
  </tr>
  <tr>
   <td width="50%">建立连接后的屏幕
   </td>
      <td width="50%"><img src="/compatibility/cts/images/play_postconnect.png" alt="播放（建立连接后）" width="300" id="play_postconnect"/></td>
  </tr>
</tbody></table>

<h3 id="record-loopback-test">录制（回环）测试</h3>

<h4 id="abstract">概要</h4>

<p>
此测试会验证录音功能是否正常。为实现此目的，这项测试会在 USB 音频接口的输出端生成音调，然后通过跳线将该音调传送到 USB 音频外设的输入端。
</p>

<h4 id="process">流程</h4>

<p>
从主菜单中调用此测试后，连接 USB 音频接口。
使用跳线将模拟输出端连接到模拟输入端。按 <strong>RECORD LOOPBACK</strong> 按钮。如果录制的测试音调的两个声道都显示在下面的视图中，请通过点击 <strong>test pass</strong>（对勾标记）按钮来表示测试通过。如果其中任一声道（或两个声道都）未显示，请通过点击 <strong>test fail</strong>（感叹号）按钮来表示测试失败。
</p>

<h4 id="notes">备注</h4>

<p>
请确保使用正接法同时连接外设上的输入和输出插孔。需要调整输入等级才能正确显示录制的信号。
</p>

<table>
  <tbody><tr>
   <td width="50%">选择“USB Audio Peripheral Record Test”<em></em>
   </td>
      <td width="50%"><img src="/compatibility/cts/images/record_test.png" alt="录制测试" width="300" id="record_test"/></td>
  </tr>
  <tr>
   <td width="50%">显示的说明摘要
   </td>
      <td width="50%"><img src="/compatibility/cts/images/record_summary.png" alt="录制摘要" width="300" id="record_summary"/></td>
  </tr>
  <tr>
   <td width="50%">建立连接前的屏幕
   </td>
      <td width="50%"><img src="/compatibility/cts/images/record_preconnect.png" alt="录制（建立连接前）" width="300" id="record_preconnect"/></td>
  </tr>
  <tr>
   <td width="50%">USB 音频接口已通过回环连接到 Android 设备</td>
      <td width="50%"><img src="/compatibility/cts/images/record_connected.png" alt="录制（已连接）" width="300" id="record_connected"/></td>
  </tr>
  <tr>
   <td width="50%">USB 音频接口背面的连接
   </td>
      <td width="50%"><img src="/compatibility/cts/images/record_connected_back.png" alt="录制（已在背面连接）" width="300" id="record_connected_back"/></td>
  </tr>
  <tr>
   <td width="50%">USB 音频接口正面的连接
   </td>
      <td width="50%"><img src="/compatibility/cts/images/record_connected_front.png" alt="录制（已在正面连接）" width="300" id="record_connected_front"/></td>
  </tr>
  <tr>
   <td width="50%">建立连接后的屏幕，正在运行录制测试
   </td>
      <td width="50%"><img src="/compatibility/cts/images/record_postconnect.png" alt="录制（建立连接后）" width="300" id="record_postconnect"/></td>
  </tr>
</tbody></table>
<h3></h3>
<h3 id="headset-buttons-test">耳机按钮测试</h3>
<h4 id="abstract">概要</h4>
<p>
此测试用于验证是否已正确识别出所推荐耳机上的 <strong>media/transport</strong> 按钮。
</p>
<h4 id="process">流程</h4>
<p>
从主菜单中调用此测试后，请连接 USB 耳机外设。
按耳机上的每个 <strong>media/transport</strong>（播放、暂停、音量调高和音量调低）按钮。每当系统识别出一个按钮，它都会在测试面板中被标识出来。识别出所有按钮后，系统将启用 <strong>test pass</strong>（对勾标记）按钮。点击 <strong>test pass</strong> 按钮即可表示成功。如果无法识别整组按钮，请通过点击 <strong>test fail</strong>（感叹号）按钮来表示测试失败。
</p>
<h4 id="notes">备注</h4>
<table>
  <tbody><tr>
   <td width="50%">USB 耳机外设已连接到 Android 设备
<p>
请留意 OTG 适配器
   </p></td>
      <td width="50%"><img src="/compatibility/cts/images/buttons_connected.png" alt="按钮（已连接）" width="300" id="buttons_connected"/></td>
  </tr>
  <tr>
   <td width="50%">选择“USB Audio Peripheral Buttons Test”<em></em>
   </td>
      <td width="50%"><img src="/compatibility/cts/images/buttons_test.png" alt="按钮测试" width="300" id="buttons_test"/></td>
  </tr>
  <tr>
   <td width="50%">显示的说明摘要
   </td>
      <td width="50%"><img src="/compatibility/cts/images/buttons_summary.png" alt="按钮摘要" width="300" id="buttons_summary"/></td>
  </tr>
  <tr>
   <td width="50%">已连接外设，但尚未识别出任何按钮
<p>
请注意，预期按钮（设备配置文件所知的按钮）用白色文本显示；不属于测试外设的按钮以灰色文本显示
   </p></td>
      <td width="50%"><img src="/compatibility/cts/images/buttons_not_recognized.png" alt="未识别出按钮" width="300" id="buttons not recognized"/></td>
  </tr>
  <tr>
   <td width="50%">已连接外设，并已识别出预期按钮
   </td>
      <td width="50%"><img src="/compatibility/cts/images/buttons_recognized.png" alt="已识别出按钮" width="300" id="buttons recognized"/></td>
  </tr>
</tbody></table>

</body></html>