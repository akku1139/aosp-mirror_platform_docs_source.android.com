<html devsite><head>

  <meta name="book_path" value="/_book.yaml"/>

  <meta name="project_path" value="/_project.yaml"/>
</head>
<body>

<!--
    Copyright 2019 The Android Open Source Project
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<h1 id="android_release_notes" class="page-title">Notas de versão do Android 10</h1>

<p>Esta página resume os principais recursos da versão do Android 10 e fornece links para outras informações. Os resumos de recursos são organizados de acordo com o local da documentação do recurso neste site.</p>

<h2 id="build">Versão</h2>

<h3 id="java_sdk_library">java_sdk_library</h3>

<p>O Android 10 introduz a <a href="/devices/architecture/java-library"><code>java_sdk_library</code></a>, uma nova regra de compilação para corrigir problemas de compatibilidade com bibliotecas Java compartilhadas. Os fabricantes de dispositivos podem usar esse mecanismo para as próprias bibliotecas Java compartilhadas para manter a compatibilidade com versões anteriores das respectivas APIs.</p>

<h2 id="architecture">Arquitetura</h2>

<h3 id="modular_system_components">Componentes modulares do sistema</h3>

<p>O Android 10 <a href="/devices/architecture/modular-system/">modula alguns componentes do sistema Android</a> e permite que eles sejam atualizados fora do ciclo normal de versão do Android. Estes são alguns dos módulos:</p>

<ul>
<li><a href="/devices/architecture/modular-system/runtime">Android Runtime</a></li>
<li><a href="/devices/architecture/modular-system/conscrypt">Conscrypt</a></li>
<li><a href="/devices/architecture/modular-system/dns-resolver">DNS Resolver</a></li>
<li><a href="/devices/architecture/modular-system/documentsui">DocumentsUI</a></li>
<li><a href="/devices/architecture/modular-system/extservices">ExtServices</a></li>
<li><a href="/devices/architecture/modular-system/media">Media</a></li>
<li><a href="/devices/architecture/modular-system/metadata">ModuleMetadata</a></li>
<li><a href="/devices/architecture/modular-system/networking">Networking</a></li>
<li><a href="/devices/architecture/modular-system/permissioncontroller">PermissionController</a></li>
<li><a href="/devices/architecture/modular-system/timezone">Time Zone Data</a></li>
</ul>

<h3 id="hardware_abstraction_layer_hal">Camada de abstração de hardware (HAL, na sigla em inglês)</h3>

<p>O Android 10 adiciona compatibilidade com a <a href="/devices/architecture/hal/dynamic-lifecycle#automatic-lifecycles">desativação automática</a> de HALs quando elas não tiverem clientes.</p>

<h3 id="kernel">Kernel</h3>

<h4 id="abi">ABI</h4>

<p>O Android 10 inclui compatibilidade com novos <a href="https://android.googlesource.com/kernel/build/+/refs/heads/master/abi/" class="external">utilitários de monitoramento de ABI</a> (link em inglês) para ajudar a comparar, rastrear e mitigar alterações de ABI do kernel que afetam a compatibilidade com os módulos do kernel.</p>

<p>O Android 10 também introduz um <a href="/devices/architecture/vndk/abi-use-check.md">verificador de usos de ABI</a> baseado em símbolos. O verificador pode detectar binários pré-compilados desatualizados no momento da compilação, para que os desenvolvedores de bibliotecas compartilhadas possam saber quais binários pré-compilados podem ser corrompidos pelas alterações que eles fazem e quais binários pré-compilados precisam ser recompilados.</p>

<h4 id="android_live-lock_daemon">Daemon do Android Live-Lock</h4>

<p>O Android 10 inclui o <a href="/devices/architecture/kernel/config#llkd">Daemon do Android Live-Lock (llkd, na sigla em inglês)</a>, desenvolvido para captar e atenuar os deadlocks do kernel.</p>

<h4 id="vdso32_on_arm64">vDSO32 no ARM64</h4>

<p>O Android 10 é compatível com o uso do <a href="/devices/architecture/kernel/config#vdso32-on-arm64">vDSO32 em kernels de 64 bits</a>, que gera um aumento de 0,4% na duração da bateria e outras melhorias de desempenho.</p>

<h4 id="fstab_entries_for_early_mounted_partitions">Entradas fstab para partições montadas anteriormente</h4>

<p>O Android 10 requer que os dispositivos especifiquem entradas <code>fstab</code> para <a href="/devices/architecture/kernel/mounting-partitions-early">partições montadas anteriormente</a> usando um arquivo <code>fstab</code> no ramdisk da primeira etapa.</p>

<h3 id="hidl">HIDL</h3>

<h4 id="offload_broadcastqueue">BroadcastQueue de descarga</h4>

<p>O Android 10 inclui um novo <code>BroadcastQueue</code> <em>de descarga</em> para as filas de <em>segundo plano</em> e <em>primeiro plano</em> já existentes. A fila de descarga tem o mesmo comportamento de prioridade e tempo limite que a fila de segundo plano. Para impedir o bloqueio da fila de segundo plano, onde podem ocorrer transmissões mais interessantes ou visíveis ao usuário, a fila de descarga processa a transmissão <code>BOOT_COMPLETED</code>, que muitos apps ouvem e que pode levar muito tempo para ser concluída.
Atualmente, a fila de descarga processa apenas a transmissão <code>BOOT_COMPLETED</code>, mas pode vir a processar outras transmissões longas.</p>

<h4 id="systemsuspend_service">Serviço SystemSuspend</h4>

<p>O Android 10 substitui a linha de execução em <code>libsuspend</code>, responsável por iniciar a suspensão do sistema com o <a href="/devices/architecture/systemsuspend">serviço SystemSuspend HIDL</a>. Essa implementação oferece funcionalidade equivalente à de versões anteriores e aproveita os benefícios da infraestrutura HIDL do Android.</p>

<h4 id="safe_union_in_hidl">safe_union no HIDL</h4>

<p>O Android 10 introduz no HIDL o <a href="/devices/architecture/hidl/safe_union"><code>safe_union</code></a>, um tipo de união marcado explicitamente.</p>

<h3 id="configuration">Configuração</h3>

<h4 id="configstore_hal">HAL ConfigStore</h4>

<p>O Android 10 suspende o uso da <a href="/devices/architecture/configuration">HAL ConfigStore</a> devido ao alto consumo de memória e à dificuldade de uso e a substitui por <a href="/devices/architecture/sysprops-apis">propriedades do sistema</a>.</p>

<h4 id="config_file_schema_api">API Config File Schema</h4>

<p>A plataforma Android contém um grande número de arquivos XML para armazenar dados de configuração. Muitos dos arquivos XML estão na partição <code>vendor</code>, mas são lidos na partição <code>system</code>. Nesse caso, o esquema do arquivo XML atua como interface entre as duas partições e, portanto, o esquema precisa ser especificado explicitamente e evoluir de uma maneira compatível com versões anteriores. Antes do Android 10, a plataforma não fornecia mecanismos para exigir a especificação e o uso do esquema XML, nem impedir alterações incompatíveis no esquema. O Android 10 fornece esse mecanismo, chamado <a href="/devices/architecture/config-file-schema-api">API Config File Schema</a>.</p>

<h4 id="system_properties_as_apis">Propriedades do sistema como APIs</h4>

<p><a href="/devices/architecture/sysprops-apis">Propriedades do sistema</a> acessadas nas partições são esquematizadas em arquivos de descrição <code>sysprop</code>, e as APIs para acessar propriedades são geradas como funções concretas para C++ e classes para Java.</p>

<h3 id="vendor_interface_vintf_object">Objeto da interface do fornecedor (VINTF, na sigla em inglês)</h3>

<h4 id="vintf">VINTF</h4>

<p>As alterações do VINTF no Android 10 incluem:</p>

<ul>
<li>suspensão do uso das tags de versão do AVB;</li>
<li>inclusão de informações do kernel em pacotes OTA;</li>
<li>compilação oficial de manifestos de ODM;</li>
<li>inclusão de uma matriz de compatibilidade entre produtos;</li>
<li>associação de uma <a href="/devices/architecture/vintf/objects#manifest-fragments">entrada de manifesto a um módulo HAL</a> no sistema de compilação.</li>
</ul>

<h3 id="bootloader">Carregador de inicialização</h3>

<h4 id="ramdisk">Ramdisk</h4>

<p>No Android 10, o <a href="/devices/bootloader/system-as-root#ramdisk">sistema de arquivos raiz</a> não está mais incluído no <code>ramdisk.img</code>. Em vez disso, ele vem mesclado no <code>system.img</code>.</p>

<h4 id="building_odm_partitions">Compilação de partições ODM</h4>

<p>O Android 10 inclui compatibilidade com a <a href="/devices/bootloader/odm-partitions">criação de partições <code>odm</code></a> usando o sistema de compilação do Android. Você pode usar uma partição <code>/odm</code> separada para personalizações, o que permite usar uma única imagem de fornecedor para vários SKUs de hardware. Isso permite que os fabricantes de projeto original (ODMs, na sigla em inglês) personalizem pacotes de suporte de placa (BSPs, nas siglas em inglês) do fornecedor do system on chip (SoC) para os dispositivos específicos deles (as placas). Eles podem implementar módulos de kernel para componentes específicos da placa, daemons específicos da placa ou os próprios recursos nas camadas de abstração de hardware (HALs, na sigla em inglês). Eles também podem substituir ou personalizar componentes do SoC.</p>

<h4 id="boot_image_header_versioning">Controle de versões para cabeçalho de imagem de inicialização</h4>

<p>O Android 10 atualiza o <a href="/devices/bootloader/boot-image-header">cabeçalho da imagem de inicialização</a> para a versão 2, que inclui uma seção para armazenar a imagem de blob da árvore de dispositivos (DTB, na sigla em inglês). Os testes VTS do Android 10 verificam se todos os dispositivos iniciados com o Android 10 usam a versão 2 do cabeçalho da imagem de inicialização e incluem uma imagem DTB válida como parte das imagens de inicialização/recuperação.</p>

<h4 id="recovery_images_for_non-ab_devices">Imagens de recuperação para dispositivos não A/B</h4>

<p>No Android 9 e versões posteriores, a <a href="/devices/bootloader/recovery-image#acpio-implementation">imagem de recuperação de um dispositivo precisa conter informações da imagem de sobreposição</a>.
Os fabricantes de dispositivos podem usar DeviceTree ou ACPI (Advanced Configuration and Power Interface) para descrever todos os dispositivos que não podem ser descobertos. O Android 10 e versões posteriores inclui compatibilidade com arquiteturas que usam ACPI em vez do blob DeviceTree para sobreposição (DTBO, na sigla em inglês).</p>

<h4 id="stable_aidl">AIDL estável</h4>

<p>O Android 10 adiciona compatibilidade com <a href="/devices/bootloader/stable-aidl">Linguagem de definição de interface do Android (AIDL)</a> estável, uma nova maneira de acompanhar a interface de programação do aplicativo (API, na sigla em inglês)/interface binária do aplicativo (ABI, na sigla em inglês) fornecida pelas interfaces de AIDL.</p>

<h4 id="moving_fastboot_to_user_space">Mover o fastboot para o espaço do usuário</h4>

<p>O Android 10 adiciona compatibilidade com partições redimensionáveis realocando a <a href="/devices/bootloader/fastbootd">implementação do fastboot</a> do gerenciador de inicialização para o espaço do usuário.</p>

<h2 id="display">Tela</h2>

<h3 id="hdr_video_playback">Reprodução de vídeo HDR</h3>

<p>O Android 10 é compatível com <a href="/devices/tech/display/hdr">reprodução HDR10, VP9 e HDR10+</a>.</p>

<h3 id="text_classification">Classificação de texto</h3>

<p>A <a href="/devices/tech/display/textclassifier">classificação de texto</a> usa técnicas de aprendizado de máquina para ajudar os desenvolvedores a classificar um texto. O Android 10 introduz dois métodos para a API TextClassifier: <a href="https://developer.android.com/reference/android/view/textclassifier/TextClassifier#suggestConversationActions(android.view.textclassifier.ConversationActions.Request)" class="external"><code>suggestConversationActions</code></a> e <a href="https://developer.android.com/reference/android/view/textclassifier/TextClassifier#detectLanguage(android.view.textclassifier.TextLanguage.Request)" class="external"><code>detectLanguage</code></a>.
O método <code>suggestConversationActions</code> gera respostas e ações sugeridas a partir de uma determinada conversa, e o método <code>detectLanguage</code> detecta o idioma do texto.</p>

<h3 id="support_for_zawgyi_font_rendering">Compatibilidade com a renderização da fonte Zawgyi</h3>

<p>Zawgyi é a fonte mais popular em Mianmar. O Android 9 e as versões anteriores não eram compatíveis com a renderização de Zawgyi porque <a href="https://www.unicode.org/faq/myanmar.html" class="external">não eram compatíveis com Unicode</a> (link em inglês).
O Android 10 resolve isso incluindo uma fonte Unicode capaz de renderizar Unicode birmanês e Zawgyi juntos. Nenhum trabalho de implementação é necessário para oferecer compatibilidade com a renderização da fonte Zawgyi em dispositivos lançados com o Android 10. Se seus dispositivos têm uma implementação personalizada para compatibilidade com Zawgyi, você pode:</p>

<ul>
<li>reverter essas alterações e usar o método compatível com a plataforma;</li>
<li>manter a fonte Zawgyi comum no seu sistema e usar o código de localidade <code>my-qaag</code> no seu <code>fonts.xml</code>. Para mais informações, consulte as <a href="http://unicode.org/reports/tr35/#unicode_script_subtag_validity" class="external">Notas da versão do Unicode CLDR sobre Zawgyi (Qaag)</a> (link em inglês).</li>
</ul>

<h3 id="limitations_to_hiding_app_icons">Limites para ocultar ícones de apps</h3>

<p>O Android 10 limita a capacidade de ocultar ícones de apps na tela de início. Os apps precisam ter um ícone, exceto se uma destas condições for aplicável:</p>

<ul>
<li>É um app do sistema, mesmo que tenha sido atualizado</li>
<li>É um administrador de perfil gerenciado (proprietário do perfil de trabalho).</li>
<li>Não solicita permissões.</li>
<li>Não contém componentes (por exemplo, atividades, provedores de conteúdo, broadcast receivers e serviços).</li>
</ul>

<p>Apps em que uma atividade inicializável pode ser ativada com um ícone não são afetados.
Exceto nas condições listadas acima, todos os apps exibem um ícone. Se nenhum ícone estiver incluído, será exibido um ícone padrão do sistema. Os ícones de apps sem atividade inicializável abrem a tela de informações do app quando o usuário toca neles.</p>

<h2 id="settings">Configurações</h2>

<p>Para melhorar a acessibilidade, o Android 10 inclui configurações de tempo limite personalizáveis pelo usuário. As alterações de API e configurações são fornecidas com o Android 10. Se você personalizar suas configurações, verifique se esse recurso é compatível. Se você tiver elementos de IU que atingem o tempo limite no seu dispositivo, use a <a href="https://developer.android.com/reference/android/view/accessibility/AccessibilityManager#getRecommendedTimeoutMillis(int,%2520int)" class="external">API de tempos limite</a> neles. Para ver mais informações, consulte as <a href="https://developer.android.com/guide/topics/ui/accessibility" class="external">diretrizes de acessibilidade para desenvolvedores Android</a>.</p>

<h2 id="compatibility">Compatibilidade</h2>

<h3 id="android_compatibility_definition_document_cdd">Documento de definição de compatibilidade do Android (CDD, na sigla em inglês)</h3>

<p>O <a href="/compatibility/android-cdd">Documento de definição de compatibilidade do Android 10</a> itera as <a href="/compatibility/cdd">versões anteriores</a> com atualizações de novos recursos e alterações nos requisitos da funcionalidade lançada anteriormente.</p>

<h2 id="tests">Testes</h2>

<h3 id="compatibility_test_suite_cts">Teste de compatibilidade (CTS, na sigla em inglês)</h3>

<p>O Android CTS tem uma <a href="/compatibility/cts/cts-release-notes">página de notas de versão</a> separada que lista várias alterações importantes no Android 10.</p>

<h4 id="cts_downloads">Downloads do CTS</h4>

<p>Os pacotes de CTS compatíveis com o Android 10 estão disponíveis na página <a href="/compatibility/cts/downloads">Downloads do CTS</a>. O código-fonte dos testes incluídos pode ser sincronizado com a tag <code>android-cts-10_r1</code> na árvore de código aberto.</p>

<h4 id="cts_shim_apex">APEX paliativo do CTS</h4>

<p>O Android 10 introduz um pacote chamado <code>CtsShimApex</code>, que precisa ser pré-instalado em um dispositivo para escrever testes CTS para gerenciamento de APEX.</p>

<h4 id="test_harness_mode">Modo de arcabouço de testes</h4>

<p>O <a href="/compatibility/cts/harness">modo de arcabouço de testes do CTS</a> ajuda os desenvolvedores a automatizar os testes de um dispositivo ou de uma frota de dispositivos.</p>

<h4 id="instant_apps_mode">Modo Instant Apps</h4>

<p>A partir do Android 10, o CTS é executado no <a href="/compatibility/cts/cts-instant">modo Instant Apps</a>, o que significa instalar o APK de teste como um Instant App e executar os testes.</p>

<p>Além do modo CTS para o Instant Apps, o Android 10 inclui o <a href="/compatibility/cts/verifier-instant-apps">CTS Verifier para Instant Apps</a></p>

<h4 id="cts_verifier_pro_audio_test">Teste Pro Audio do CTS Verifier</h4>

<p>O Android 10 adiciona um teste do CTS Verifier para <a href="/compatibility/cts/Verifier-Pro-Audio">conformidade com o Pro Audio</a>.</p>

<h4 id="cts_verifier_midi_tests">Testes MIDI do CTS Verifier</h4>

<p>No Android 10, o <a href="/compatibility/cts/cts-midi">teste MIDI do CTS Verifier</a> testa a funcionalidade MIDI com interfaces USB MIDI, interfaces Bluetooth MIDI e um caminho de dispositivo MIDI virtual.</p>

<h4 id="cts_test_interpretation">Interpretação de testes CTS</h4>

<p>O Android 10 atualiza o mecanismo para <a href="/compatibility/cts/interpret">interpretar resultados de CTS</a>.</p>

<h3 id="vendor_test_suite_vts">Teste de fornecedor (VTS)</h3>

<h4 id="vts_testing_with_debug_ramdisk">Teste VTS com ramdisk de depuração</h4>

<p>No Android 10, a imagem genérica do sistema (GSI, na sigla em inglês) usada para executar o teste de conformidade CTS-on-GSI/VTS muda do tipo de depuração do usuário para criação do usuário, porque a GSI tem versão assinada. No entanto, o comando <code>adb root</code> que concede permissões de raiz de host ao dispositivo Android em teste não está disponível em uma compilação do usuário. Esse problema ocorre porque o VTS requer a execução de <code>adb root</code>.</p>

<p>O <a href="/compatibility/vts/vts-on-gsi">ramdisk de depuração</a> é introduzido para permitir o <code>adb root</code>, se o dispositivo estiver desbloqueado. Isso simplifica o fluxo de testes reutilizando a mesma compilação de usuário <code>system.img</code> (GSI ou <code>system.img</code> do OEM).</p>

<h4 id="hardware_composer_validation">Validação do Hardware Composer</h4>

<p>O Android 10 adiciona uma nova classe de teste VTS para validação do Hardware Composer por meio da interface <code>readback</code> em <a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/graphics/composer/2.2/IComposerClient.hal" class="external"><code>IComposerClient.hal</code></a>.
Se os fornecedores não implementam <code>readback</code>, os testes são aprovados automaticamente.</p>

<h3 id="debugging">Depuração</h3>

<h4 id="loading_shared_libraries_with_different_class_loaders">Carregar bibliotecas compartilhadas com diferentes carregadores de classes</h4>

<p>No Android 9 e versões anteriores, os apps carregavam as respectivas bibliotecas Java compartilhadas vinculadas no carregador de classes do app. No Android 10, o framework usa um carregador de classes diferente do carregador de classes do app para carregar bibliotecas Java compartilhadas vinculadas por meio de <code>uses-library</code> ou <code>uses-static-library</code>.</p>

<p>Em geral, os apps não podem depender do uso de um carregador de classes específico. Portanto, essa alteração não deve prejudicar o comportamento do app. No entanto, se um app usar um carregador de classes único, esse comportamento será corrompido. Além disso, a visibilidade privada do pacote para classes no mesmo pacote ainda é compatível, mas não em bibliotecas compartilhadas.</p>

<p>Os fabricantes de dispositivos podem encontrar problemas de compatibilidade de apps ao testar dispositivos que executam o Android 10.</p>

<h2 id="security_features">Recursos de segurança</h2>

<h3 id="face_authentication">Autenticação facial</h3>

<p>A <a href="/security/biometric/face-authentication">autenticação facial</a> permite que os usuários desbloqueiem os respectivos dispositivos simplesmente olhando para a parte frontal deles.
O Android 10 é compatível com uma nova pilha de autenticação facial que pode processar de forma segura os frames da câmera, preservando a segurança e a privacidade durante a autenticação facial no hardware compatível. O Android 10 também fornece uma maneira fácil para que implementações seguras permitam a integração de apps para transações, como para internet banking ou outros serviços</p>

<h3 id="extended_access">Acesso estendido</h3>

<p>O mecanismo de "Agentes de confiança" (usado por mecanismos de autenticação terciários, como o Smart Lock) só pode estender o desbloqueio no Android 10. Os agentes de confiança não podem mais desbloquear um dispositivo bloqueado e só podem manter um dispositivo desbloqueado por, no máximo, quatro horas.</p>

<h3 id="encryption">Criptografia</h3>

<h4 id="oemcrypto">OEMCrypto</h4>

<p>O Android 10 usa a versão 15 da API OEMCrypto.</p>

<h3 id="testing">Teste</h3>

<h4 id="boundssanitizer">BoundsSanitizer</h4>

<p>O Android 10 implementa o <a href="/devices/tech/debug/bounds-sanitizer">BoundsSanitizer (BoundSan)</a> no Bluetooth e nos codecs. O BoundSan usa o limpador de limites do UBSan. Essa atenuação é ativada por módulo. Ela ajuda a proteger os componentes críticos do Android e não pode ser desativada. O BoundSan está ativado nos seguintes codecs:</p>

<ul>
<li><code>libFLAC</code></li>
<li><code>libavcdec</code></li>
<li><code>libavcenc</code></li>
<li><code>libhevcdec</code></li>
<li><code>libmpeg2</code></li>
<li><code>libopus</code></li>
<li><code>libvpx</code></li>
<li><code>libspeexresampler</code></li>
<li><code>libvorbisidec</code></li>
<li><code>libaac</code></li>
<li><code>libxaac</code></li>
</ul>

<h4 id="integer_overflow_sanitization">Limpeza de estouro de números inteiros</h4>

<p>O Android 10 permite a <a href="/devices/tech/debug/intsan">Limpeza de estouro de números inteiros (IntSan, na sigla em inglês)</a> em codecs de software. O desempenho da reprodução precisa ser aceitável para quaisquer codecs que não sejam compatíveis com o hardware do dispositivo. O IntSan está ativado nos seguintes codecs:</p>

<ul>
<li><code>libFLAC</code></li>
<li><code>libavcdec</code></li>
<li><code>libavcenc</code></li>
<li><code>libhevcdec</code></li>
<li><code>libmpeg2</code></li>
<li><code>libopus</code></li>
<li><code>libvpx</code></li>
<li><code>libspeexresampler</code></li>
<li><code>libvorbisidec</code></li>
</ul>

<h4 id="execute-only_memory">Memória somente de execução</h4>

<p>Por padrão, as seções de código executável dos binários do sistema AArch64 são marcadas como somente execução (ilegíveis) para reduzir ainda mais os ataques de reutilização de just-in-time. O código que combina dados e código e o código que inspeciona intencionalmente essas seções (sem primeiro remapear os segmentos de memória como legíveis) não funcionam mais. Os apps que têm um SDK de destino do Android 10 (API de nível 29 ou superior) serão afetados se o app tentar ler seções de código de bibliotecas do sistema habilitadas para <a href="/devices/tech/debug/execute-only-memory">memória somente de execução (XOM, na sigla em inglês)</a> nsem primeiro marcar a seção como legível.</p>

<h4 id="scudo">Scudo</h4>

<p><a href="/devices/tech/debug/scudo">Scudo</a> é um alocador de memória dinâmico no modo de usuário projetado para ser mais resiliente contra vulnerabilidades relacionadas a heap. Ele fornece as primitivas padrão de alocação e desalocação de C, bem como as primitivas de C++.</p>

<h4 id="shadowcallstack">ShadowCallStack</h4>

<p><a href="/devices/tech/debug/shadow-call-stack"><code>ShadowCallStack</code> (SCS)</a> é um modo de <a href="https://clang.llvm.org/docs/ShadowCallStack.html" class="external">instrumentação LLVM</a> (link em inglês) que protege contra substituições de endereço de retorno (por exemplo, estouros de buffer de pilha) salvando o endereço de retorno de uma função em uma instância <code>ShadowCallStack</code> alocada separadamente no prólogo de funções não folha e carregando o endereço de retorno da instância <code>ShadowCallStack</code> no epílogo da função.</p>

<h2 id="audio">Áudio</h2>

<h3 id="audio_hal">HAL de áudio</h3>

<p>O Android 10 inclui estas novas funcionalidades para <a href="/devices/audio/implement">HAL de áudio</a>:</p>

<ul>
<li><code>AudioSource</code></li>
<li><code>AudioFormat</code></li>
<li><code>AudioChannelMask</code></li>
</ul>

<p>Requisitos adicionais são adicionados para a implementação de HAL e subsistema de áudio.</p>

<h3 id="preprocessing_effects">Efeitos de pré-processamento</h3>

<p>O Android fornece <a href="/devices/audio/implement-pre-processing">efeitos de pré-processamento</a>, como cancelamento de eco acústico, controle automático de ganho e supressão de ruído.
O Android 10 inclui novos requisitos para captura com <code>VOICE_COMMUNICATION</code>.</p>

<h3 id="audio_policy_manager">Gerenciador de políticas de áudio</h3>

<p>O Android 10 inclui uma refatoração significativa do <a href="/devices/audio/implement-policy">gerenciador de políticas de áudio</a> para fornecer mais flexibilidade para compatibilidade com casos de uso automotivos complexos.</p>

<h3 id="high-resolution_audio">Áudio de alto desempenho</h3>

<p>O Android 10 inclui estas melhorias para <a href="/devices/audio/highres-effects">áudio de alto desempenho</a>:</p>

<ul>
<li>Compatibilidade com flutuação</li>
<li>Compatibilidade com frequência de 192 KHz</li>
<li>Compatibilidade com oito canais</li>
<li>Inclusão de informações de tempo</li>
</ul>

<h3 id="concurrent_capture">Captura simultânea</h3>

<p>O Android 10 aprimora a experiência do usuário de <a href="/devices/audio/concurrent">captura simultânea</a> que exige que mais de uma captura de áudio ativa ocorra simultaneamente.</p>

<h3 id="audioplaybackcapture">AudioPlaybackCapture</h3>

<p>O Android 10 contém uma nova API, chamada <code>AudioPlaybackCapture</code>, que oferece aos apps a capacidade de copiar o áudio que está sendo tocado por outros apps. Esse recurso é semelhante à captura de tela, mas para áudio.
O principal caso de uso é permitir que apps de streaming capturem o áudio que está sendo reproduzido por jogos.</p>

<p>A API de captura não afeta a latência do app cujo áudio está sendo capturado.</p>

<h3 id="midi">MIDI</h3>

<p>O Android 10 facilita a portabilidade de apps de áudio profissionais que usam MIDI para a plataforma Android com a <a href="/devices/audio/midi#midi-ndk">API <code>AMidi</code> NDK</a>.</p>

<h2 id="camera">Câmera</h2>

<p>Para ver um resumo das alterações feitas na API da câmera, na HAL da câmera e no módulo da câmera introduzidas no Android 10, consulte as <a href="/devices/camera/versioning#q-version">atualizações da câmera do Android 10</a>.</p>

<h3 id="camera_framework_privacy_improvements">Melhorias na privacidade do framework da câmera</h3>

<p>O Android 10 introduz melhorias de privacidade no framework da câmera. Para evitar a exposição de informações estáticas da câmera potencialmente sensíveis no <a href="https://developer.android.com/reference/android/hardware/camera2/CameraCharacteristics" class="external"><code>CameraCharacteristics</code></a> sem o consentimento do usuário, os apps precisam ter a permissão <a href="https://developer.android.com/reference/android/Manifest.permission.html#CAMERA" class="external"><code>CAMERA</code></a> para recuperar metadados estáticos com uma tag sensível à privacidade usando o método <a href="https://developer.android.com/reference/android/hardware/camera2/CameraManager#getCameraCharacteristics(java.lang.String)" class="external"><code>getCameraCharacteristics</code></a>.</p>

<p>Para ver uma lista das chaves características da câmera que exigem a permissão <code>CAMERA</code>, chame o método <a href="https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/hardware/camera2/CameraCharacteristics.java#303" class="external"><code>getKeysNeedingPermission</code></a>.</p>

<h3 id="session_reconfiguration_query">Consulta de reconfiguração de sessão</h3>

<p>O Android 10 adiciona um recurso de <a href="/devices/camera/session-parameters#session_reconfiguration_query">consulta de reconfiguração de sessão</a>, que permite um desempenho aprimorado por meio de mais controle sobre a lógica de reconfiguração de parâmetros da sessão interna.</p>

<h3 id="camera_hal3_buffer_management_apis">APIs para gerenciamento de buffer de HAL3 da câmera</h3>

<p>O Android 10 introduz <a href="/devices/camera/buffer-management-api">APIs opcionais para gerenciamento de buffer de HAL3 da câmera</a> que permitem implementar a lógica de gerenciamento de buffer para ter diferentes memórias e capturar trocas de latência nas implementações de HAL da câmera.</p>

<h3 id="camera_hal_dynamic_physical_camera_switch">Chave física dinâmica de HAL da câmera</h3>

<p>O Android 10 introduz uma tag de metadados dinâmicos, <code>ANDROID_LOGICAL_MULTI_CAMERA_ACTIVE_PHYSICAL_ID</code>, que indica a câmera física subjacente ativa de um dispositivo de câmera lógico. Para ver mais informações, consulte <a href="/devices/camera/multi-camera#support_checklist">Compatibilidade com várias câmeras</a>.</p>

<h3 id="support_for_hiding_physical_cameras">Compatibilidade com ocultação de câmeras físicas</h3>

<p>No Android 10, a HAL da câmera pode reduzir o número de câmeras físicas que podem ser abertas diretamente por um app. Para ver mais detalhes, consulte <a href="/devices/camera/multi-camera#support_checklist">Compatibilidade com várias câmeras</a>.</p>

<h3 id="camera2_vndk_api">API Camera2 VNDK</h3>

<p>No Android 10, os módulos do fornecedor podem acessar e controlar dispositivos de câmera por meio de duas novas interfaces HIDL padrão: <code>android.frameworks.cameraservice.service@2.0</code> e <code>android.frameworks.cameraservice.device@2.0</code>. Para tornar o uso das interfaces HIDL mais conveniente, o Android 10 também introduz uma biblioteca disponível ao fornecedor, a <code>libcamera2_vendor</code>. Essa biblioteca é semelhante à <a href="https://developer.android.com/ndk/reference/group/camera" class="external">biblioteca Camera NDK</a>, com algumas pequenas modificações.</p>

<h3 id="stream_configurations">Configurações de streaming</h3>

<p>O Android 10 adiciona recursos que permitem que os fornecedores de câmeras anunciem <a href="/devices/camera/stream-config#recommended_stream_configurations">streamings de câmeras recomendados</a> para clientes de câmera e ofereçam compatibilidade com uma <a href="/devices/camera/stream-config#api_to_query_stream_combinations">API para consultar combinações de streaming</a>.</p>

<h3 id="camera_stream_combination_requirements">Requisitos de combinação de streaming de câmera</h3>

<p>Os dispositivos que executam o Android 10 não precisam mais oferecer compatibilidade para combinações de streaming com streaming de subcâmera físico. No entanto, os dispositivos que executam o Android 10 com o dispositivo HAL de câmera versão 3.5 precisam ser compatíveis com <code>isStreamCombinationSupported()</code> para permitir que os apps consultem se uma combinação de streaming que contém streamings físicos é compatível.</p>

<p>Para ver mais informações, consulte <a href="/devices/camera/multi-camera#support_checklist">Compatibilidade com várias câmeras</a>.</p>

<h3 id="heif_imaging">Tecnologia HEIF</h3>

<p>O Android 10 fornece compatibilidade nativa da câmera com <a href="/devices/camera/heif">imagens com formato de arquivo de imagem de alta eficiência (HEIF, na sigla em inglês)</a>, que oferecem melhor qualidade e tamanhos menores que os arquivos JPEG. Os dispositivos precisam ter um codificador HEIC ou HEVC para oferecer compatibilidade com imagens HEIF.</p>

<h3 id="monochrome_cameras">Câmeras monocromáticas</h3>

<p>O Android 10 oferece maior compatibilidade com o formato de streaming Y8, metadados estáticos da matriz de filtros de cores monocromáticas e infravermelhas próximas (NIR, na sigla em inglês), além de funções <code>DngCreator</code> para <a href="/devices/camera/monochrome">câmeras monocromáticas</a>.</p>

<h2 id="connectivity">Conectividade</h2>

<h3 id="calling_and_messaging">Chamadas e mensagens</h3>

<h4 id="emergency_numbers_and_emergency_calling">Números e chamadas de emergência</h4>

<p>O Android 10 fornece compatibilidade aprimorada com <a href="/devices/tech/connect/emergency-call">chamadas de emergência</a>. Em caso de emergência, os dispositivos compatíveis com IRadio HAL v1.4 podem iniciar uma chamada usando números de emergência recuperados de uma fonte como um chip, o sinal de rede ou o banco de dados do Android. Os números podem ser classificados com base em categorias de serviço de emergência, por exemplo, polícia, bombeiros e ambulância.</p>

<h4 id="group_call_apis">APIs de chamada em grupo</h4>

<p>As APIs de chamada em grupo são uma extensão das APIs eMBMS adicionadas no Android 9. As novas APIs definem um padrão para os apps participarem de chamadas em grupo por transmissão celular interagindo com os pacotes de middleware eMBMS. As chamadas em grupo exigem compatibilidade do fornecedor do chipset, fornecedor do middleware e da operadora de celular para funcionarem corretamente. A documentação do desenvolvedor está localizada em <a href="https://developer.android.com/reference/android/telephony/MbmsGroupCallSession" class="external">developer.google.com</a>.</p>

<h4 id="remote_sim_capabilities">Recursos remotos do chip</h4>

<p>O Android 10 apresenta recursos remotos do chip que permitem que apps de mensagens em um dispositivo host Android enviem mensagens SMS por smartphones usando mecanismos como Bluetooth. Para ver mais informações, consulte a documentação de referência para o método <a href="https://developer.android.com/reference/android/telephony/SubscriptionInfo.html#getSubscriptionType()" class="external"><code>getSubscriptionType</code></a> e a constante <a href="https://developer.android.com/reference/android/telephony/SubscriptionManager.html#SUBSCRIPTION_TYPE_REMOTE_SIM" class="external"><code>SUBSCRIPTION_TYPE_REMOTE_SIM</code></a>.</p>

<h4 id="multiple_esims">Vários eSIMs</h4>

<p>No Android 10, a classe <code>EuiccManager</code> é compatível com dispositivos com <a href="/devices/tech/connect/esim-overview#supporting_multiple_esims">vários chips incorporados (eSIMs)</a> ou eUICCs.</p>

<h4 id="esim_updates">Atualizações de eSIM</h4>

<p>Para dispositivos que executam o Android 10 e que são compatíveis com eSIMs, é necessário definir uma matriz de ID de slot eUICC não removível. Os dispositivos também precisam oferecer compatibilidade com IRadio HAL v1.4 e IRadioConfig HAL v1.2. Para ver mais informações, consulte <a href="/devices/tech/connect/esim-overview#hardwaremodem_requirements">Implementação de eSIM</a> de <a href="/devices/tech/connect/esim-modem-requirements#hal_requirements">Requisitos de modem</a>.</p>

<h4 id="5g_non-standalone_nsa">5G não autônomo (NSA, na sigla em inglês)</h4>

<p>O Android 10 adiciona compatibilidade com o <a href="/devices/tech/connect/5g-nsa">5G NSA</a>. Essa é uma solução para redes 5G em que a rede é compatível com uma infraestrutura 4G já existente.
No Android 10, os dispositivos podem exibir um ícone 5G na barra de status quando um dispositivo se conectar a uma rede 5G.</p>

<h4 id="phone_account_suggestion">Sugestão de conta telefônica</h4>

<p>O Android 10 introduz o <a href="/devices/tech/connect/phone-account-suggestion">serviço de sugestão de conta telefônica</a>, que permite que essas sugestões sejam exibidas aos usuários quando eles fizerem uma chamada.</p>

<h3 id="carrier">Operadora</h3>

<h4 id="migrating_mobile_network_settings">Migrar configurações de rede móvel</h4>

<p>O Android 10 reprojetou o código da IU das configurações de rede móvel e o moveu da pilha de telefonia para a pilha de configurações. Para oferecer compatibilidade com o código migrado, altere os seguintes valores da configuração da rede móvel de recursos do Android para recursos <code>CarrierConfig</code>:</p>

<p><code>config_world_mode</code> -&gt;
<code>CarrierConfigManager#KEY_WORLD_MODE_ENABLED_BOOL</code></p>

<p><code>config_support_tdscdma</code> -&gt;
<code>CarrierConfigManager#KEY_SUPPORT_TDSCDMA_BOOL</code></p>

<p><code>config_support_tdscdma_roaming_on_networks</code> -&gt;
<code>CarrierConfigManager#KEY_SUPPORT_TDSCDMA_ROAMING_NETWORKS_STRING_ARRAY</code></p>

<p><code>config_enabled_lte</code> -&gt;
<code>CarrierConfigManager#KEY_LTE_ENABLED_BOOL</code></p>

<h4 id="device_identifiers">Identificadores de dispositivo</h4>

<p><a href="/devices/tech/config/device-identifiers">Identificadores de dispositivo</a> persistentes (IMEI/MEID, IMSI e número de série da versão) são protegidos por uma permissão privilegiada com acesso também concedido a apps do proprietário do dispositivo e do perfil. Como o IMSI e o número de série do chip são fornecidos pela operadora, o acesso a esses identificadores é concedido a pacotes com privilégios de operadora.</p>

<h3 id="wi-fi">Wi-Fi</h3>

<h4 id="network_selection">Seleção de rede</h4>

<p>O Android avalia continuamente a qualidade da rede conectada e das redes disponíveis. O Android 10 tem algoritmos e procedimentos atualizados para <a href="/devices/tech/connect/wifi-network-selection">selecionar redes Wi-Fi e alternar entre elas</a>.</p>

<h4 id="wi-fi_preferred_network_offload_scanning">Buscar por rede Wi-Fi preferencial de descarga</h4>

<p>O Android 10 introduz um método de API opcional em <code>WifiManager</code>, chamado <code>setDeviceMobilityState()</code>. Esse método aumenta o intervalo entre as buscas por <a href="/devices/tech/connect/wifi-scan">redes preferenciais de descarga (PNO, na sigla em inglês)</a> quando o dispositivo está inativo para reduzir o uso de energia.</p>

<h4 id="carrier_wi-fi">Wi-Fi da operadora</h4>

<p>No Android 10, dispositivos com o <a href="/devices/tech/connect/carrier-wifi">recurso de Wi-Fi da operadora</a> se conectam automaticamente a redes Wi-Fi configuradas da operadora (redes com certificados de chave pública).</p>

<h4 id="wi-fi_easy_connect">Wi-Fi Easy Connect</h4>

<p>No Android 10, os dispositivos podem usar <a href="/devices/tech/connect/wifi-easy-connect">Wi-Fi Easy Connect</a>, que utiliza o protocolo de provisionamento de dispositivo (DPP, na sigla em inglês) introduzido pela Wi-Fi Alliance (WFA), para provisionar e configurar dispositivos Wi-Fi.</p>

<h4 id="wi-fi_low-latency_mode">Modo de baixa latência de Wi-Fi</h4>

<p>O Android 10 introduz um <a href="/devices/tech/connect/wifi-low-latency">modo de baixa latência de Wi-Fi</a>, que configura o chip Wi-Fi para reduzir a latência.</p>

<h4 id="updated_dhcp_server">Servidor DHCP atualizado</h4>

<p>Como parte da formação de uma estrutura genérica de serviço "Servidor IP", o <code>dnsmasq</code> está sendo excluído. O Android 10 substitui o uso funcional do servidor DHCPv4 por um componente separado, escrito principalmente em Java para melhor se integrar ao plano de controle do framework Java. Isso melhora a segurança e a capacidade de atualização do servidor DHCP. Para ver mais detalhes, consulte <a href="https://android.googlesource.com/platform/packages/modules/NetworkStack/+/refs/heads/master/src/android/net/dhcp/DhcpServer.java" class="external"><code>packages/modules/NetworkStack/src/android/net/dhcp/DhcpServer.java</code></a>.</p>

<p>Nenhuma ação é necessária para implementar essa alteração: todos os dispositivos que estão sendo liberados e atualizados para o Android 10 usam o <code>DhcpServer</code> por padrão.
Se você tiver personalizações no servidor DHCP, poderá voltar para o comportamento do Android 9 definindo a configuração global <code>tether_enable_legacy_dhcp_server=1</code>.
Como o novo <code>DhcpServer</code> está incluído no módulo de componentes de rede, toda personalização para a funcionalidade do servidor DHCP precisa ser feita em upstream.</p>

<h4 id="wpa3_and_wi-fi_enhanced_open">WPA3 e Wi-Fi Enhanced Open</h4>

<p>O Android 10 adiciona compatibilidade com padrões de segurança <a href="/devices/tech/connect/wifi-wpa3-owe">Wi-Fi Protected Access 3 (WPA3) e Wi-Fi Enhanced Open</a> para oferecer melhor privacidade e robustez contra ataques conhecidos.</p>

<h4 id="wi-fi_direct">Wi-Fi Direct</h4>

<p>O <a href="/devices/tech/connect/wifi-direct">Wi-Fi Direct</a>, também conhecido como Wi-Fi P2P, permite que os dispositivos compatíveis se descubram e se conectem diretamente usando o protocolo Wi-Fi Direct sem acesso à Internet ou a uma rede celular.</p>

<h4 id="mac_randomization_enhancements">Melhorias de escolha aleatória de MAC</h4>

<p>No Android 10, a <a href="/devices/tech/connect/wifi-mac-randomization">escolha aleatória de MAC</a> é ativada por padrão para o modo cliente, SoftAp e Wi-Fi Direct. Os dispositivos precisam fornecer uma opção para ativar ou desativar a escolha aleatória de MAC para cada SSID na IU do sistema.</p>

<h4 id="passpoint_r2">Passpoint R2</h4>

<p>O Android 10 introduz compatibilidade com os <a href="/devices/tech/connect/wifi-passpoint#passpoint_r2">recursos do Passpoint R2</a>.
O Passpoint R2 implementa a inscrição on-line (OSU, na sigla em inglês), um método padrão para provisionar novos perfis do Passpoint. O Android 10 é compatível com o provisionamento de perfis EAP-TTLS usando SOAP-XML.</p>

<h3 id="nfc">NFC</h3>

<h4 id="secure_nfc">Proteger NFC</h4>

<p>O recurso <a href="/devices/tech/connect/secure-nfc">Proteger NFC</a> permite que a emulação de cartões NFC fora do host seja ativada apenas quando a tela do dispositivo estiver desbloqueada. A implementação desse recurso oferece aos usuários a opção de ativar o "Proteger NFC" para melhorar a segurança.</p>

<h4 id="android_beam_deprecated">O Android Beam está obsoleto</h4>

<p>No Android 10, o Android Beam não é mais necessário, e as interfaces e os métodos a seguir estão obsoletos.</p>

<p>Interfaces:</p>

<ul>
<li><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.CreateBeamUrisCallback.html" class="external"><code>NfcAdapter.CreateBeamUrisCallback</code></a> </li>
<li><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.CreateNdefMessageCallback.html" class="external"><code>NfcAdapter.CreateNdefMessageCallback</code></a> </li>
<li><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.OnNdefPushCompleteCallback.html" class="external"><code>NfcAdapter.OnNdefPushCompleteCallback</code></a> </li>
</ul>

<p>Métodos:</p>

<ul>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.CreateBeamUrisCallback#createBeamUris(android.nfc.NfcEvent)"><code>createBeamUris</code></a></li>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.html#invokeBeam(android.app.Activity)"><code>invokeBeam</code></a></li>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.html#isNdefPushEnabled()"><code>isNdefPushEnabled</code></a></li>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.html#setBeamPushUris(android.net.Uri%5B%5D,%2520android.app.Activity)"><code>setBeamPushUris</code></a></li>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.html#setNdefPushMessage(android.nfc.NdefMessage,%2520android.app.Activity,%2520android.app.Activity...)"><code>setNdefPushMessage</code></a></li>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.html#setNdefPushMessageCallback(android.nfc.NfcAdapter.CreateNdefMessageCallback,%2520android.app.Activity,%2520android.app.Activity...)"><code>setNdefPushMessageCallback</code></a></li>
<li class="external"><a href="https://developer.android.com/reference/android/nfc/NfcAdapter.html#setOnNdefPushCompleteCallback(android.nfc.NfcAdapter.OnNdefPushCompleteCallback,%2520android.app.Activity,%2520android.app.Activity...)"><code>setOnNdefPushCompleteCallback</code></a></li>
</ul>

<p>Para usar o Android Beam, informe a constante de recurso <a href="https://developer.android.com/reference/android/content/pm/PackageManager#FEATURE_NFC_BEAM" class="external"><code>android.sofware.nfc.beam</code></a>.</p>

<h2 id="graphics">Gráficos</h2>

<h3 id="asurfacecontrol">ASurfaceControl</h3>

<p>O Android 10 adiciona o <a href="/devices/graphics/arch-sf-hwc#surfaceflinger"><code>ASurfaceControl</code></a>, uma nova maneira de <code>SurfaceFlinger</code> aceitar buffers.</p>

<h3 id="graphics_implementation">Implementação gráfica</h3>

<h4 id="opengl_es_layers">Camadas do OpenGL ES</h4>

<p>O Android 10 introduz um <a href="/devices/graphics/implement-opengl-es#gles_layers">sistema de camadas</a> para o GLES.</p>

<h4 id="egl_15">EGL 1.5</h4>

<p>O Android 10 implementa a <a href="https://www.khronos.org/registry/EGL/specs/eglspec.1.5.pdf" class="external">interface EGL 1.5</a> (link em inglês).
Para ver informações sobre novos recursos no EGL 1.5, consulte a <a href="https://www.khronos.org/news/press/khronos-releases-egl-1.5-specification" class="external">Khronos libera a especificação EGL 1.5</a> (link em inglês).</p>

<h4 id="vulkan">Vulkan</h4>

<p>O Android 10 inclui compatibilidade com gráficos Vulkan 1.1.
A plataforma também é compatível com <code>VK_KHR_swapchain</code> v70, para que o app Vulkan possa criar uma <code>VkImage</code> apoiada pela memória de cadeia de troca.</p>

<h4 id="performance_refresh_rate">Taxa de atualização de desempenho</h4>

<p>O Android 10 adiciona compatibilidade com uma taxa de atualização de desempenho.
Esse recurso é desativado por padrão.</p>

<h2 id="interaction">Interação</h2>

<h3 id="automotive">Automóveis</h3>

<h4 id="automotive_audio">Áudio automotivo</h4>

<p>No Android 10, o contexto de HAL de áudio é mapeado para <code>AudioAttributes.usage</code> para identificar sons. O Android é compatível com uma instância de <code>AUDIO_DEVICE_OUT_BUS</code> por contexto. A HAL <code>IAudioControl</code> fornece <a href="/devices/automotive/audio">extensões específicas do veículo para a HAL de áudio</a>.</p>

<h3 id="gestural_navigation">Navegação por gestos</h3>

<p>O Android 10 apresenta uma opção para navegação totalmente por gestos no sistema. Para ver informações sobre como preparar apps para usar esse recurso, consulte a página <a href="https://developer.android.com/preview/features/gesturalnav" class="external">Navegação por gestos</a> no site para desenvolvedores Android.</p>

<h3 id="neural_networks">Redes neurais</h3>

<p>O Android 10 introduz atualizações para a API Neural Networks e a HAL de redes neurais. Para ver um resumo das alterações, consulte <a href="/devices/neural-networks/#android-q">Redes neurais</a>.</p>

<p>Documentação nova e atualizada sobre redes neurais para Android 10:</p>

<ul>
<li><a href="/devices/neural-networks/">Visão geral</a></li>
<li><a href="/devices/neural-networks/ahardwarebuffer">AHardwareBuffer</a></li>
<li><a href="/devices/neural-networks/burst-executions">Execuções de burst e filas rápidas de mensagens</a></li>
<li><a href="/devices/neural-networks/compilation-caching">Armazenamento de compilação em cache</a></li>
<li><a href="/devices/neural-networks/device-discovery">Descoberta e atribuição de dispositivos</a></li>
<li><a href="/devices/neural-networks/vendor-extensions">Extensões de fornecedor</a></li>
</ul>

<h3 id="sensors">Sensores</h3>

<h4 id="sensors_hal_20">HAL 2.0 de sensores</h4>

<p>A <a href="/devices/sensors/sensors-hal2">HAL 2.0 de sensores</a> é compatível com o uso de <a href="/devices/architecture/hidl/fmq">filas rápidas de mensagens (FMQs, na sigla em inglês)</a> para enviar eventos do sensor da HAL para o Android Sensors Framework.</p>

<h4 id="sensors_off">Sensores desativados</h4>

<p>O Android 10 inclui uma configuração de desenvolvedor para <a href="/devices/sensors/sensors-off">desativar todos os sensores</a> em um dispositivo. Esse recurso ajuda os desenvolvedores a testar a funcionalidade do app em situações em que esses sensores se tornam indisponíveis e também oferece aos usuários uma maneira de controlar os sensores nos dispositivos.</p>

<p>Se seus dispositivos usam a implementação padrão de <code>SensorService</code>, <code>CameraService</code> e <code>AudioPolicyService</code>, nenhuma outra personalização é necessária para o design de referência. Se você tem outros sensores, consulte <a href="/devices/sensors/sensors-off#customization">Personalização</a> para ver mais detalhes sobre a compatibilidade com esse recurso.</p>

<h2 id="media">Mídia</h2>

<h3 id="updatable_media_components">Componentes de mídia atualizáveis</h3>

<p>O Android 10 fornece <a href="/devices/media/updatable-media">componentes de mídia atualizáveis</a> que permitem a atualização de <a href="/devices/architecture/modular-system/">componentes de sistema modular</a> relacionados à mídia por meio da infraestrutura da Google Play Store ou por meio de um mecanismo over the air (OTA) fornecido pelo parceiro.</p>

<h3 id="media_drm">DRM de mídia</h3>

<p>O Android 10 aprimora a utilidade e a usabilidade das APIs <code>MediaDrm</code> Java e NDK.</p>

<h3 id="decoding">Decodificação</h3>

<p>O Android 10 é compatível com a decodificação AV1 SW.</p>

<h2 id="permissions">Permissões</h2>

<p>O Android 10 fornece outras configurações de permissão para transparência e privacidade do usuário.</p>

<h3 id="contacts_provider_and_affinities_information">Informações sobre afinidades e sobre o Provedor de contatos</h3>

<p>A partir do Android 10, os dados relacionados à afinidade de contatos, gerenciados pelo <a href="/devices/tech/config/contacts-affinities">componente Provedor de contatos</a>, são acessados de maneira diferente de como era feito no Android 9 e versões anteriores. Essas alterações em relação à acessibilidade dos dados melhoram a privacidade do usuário em todos os dispositivos Android 10 que usam o componente Provedor de contatos.
O banco de dados subjacente não contém mais dados de afinidades de contato. Portanto, os apps não podem gravar ou ler a partir deles.</p>

<p>Espera-se que as alterações no Android 10 tenham um grande impacto nas APIs. Se seus apps dependem dos recursos obsoletos mencionados em "Informações sobre afinidades e sobre o Provedor de contatos", você pode atualizar os apps para compensar alterações. Além disso, se você usa uma versão ramificada do Provedor de contatos, é necessário atualizá-lo.</p>

<h3 id="tristate_location_permissions">Permissões de localização tri-state</h3>

<p><a href="/devices/tech/config/tristate-perms">As permissões de localização tri-state</a> no Android 10 dão aos usuários maior controle sobre a forma como os apps acessam a localização do dispositivo.</p>

<h3 id="background_location_access_reminder">Lembrete de acesso ao local em segundo plano</h3>

<p>O Android 10 apresenta um <a href="/devices/tech/config/background-location-access">lembrete de localização de acesso em segundo plano</a>, que aumenta a transparência quanto ao acesso dos apps à localização de um dispositivo e ajuda os usuários a manter o controle sobre esse acesso.</p>

<h3 id="restrict_opportunistic_locations">Restringir locais oportunistas</h3>

<p>Quando um app solicita a localização de um dispositivo, ele pode aguardar a resposta da solicitação ou, usando listeners de localização ativos, receber uma atualização de localização oportunista. A partir do Android 10, para receber <a href="/devices/tech/config/restrict-opportunistic-locations">atualizações de localização oportunistas</a>, os desenvolvedores têm que especificar que precisam de atualizações de localização passivas da classe <code>FusedLocationProviderClient</code>.</p>

<h3 id="background_apps_launching">Abrir apps em segundo plano</h3>

<p>No Android 10, apps não privilegiados sem uma janela visível não podem ser iniciados automaticamente em primeiro plano. Essa alteração suprime pop-ups de anúncios e preenchimentos totais maliciosos. Nenhuma ação é necessária para ativar esse recurso.</p>

<h3 id="app_sandboxing">Sandbox de apps</h3>

<p>No Android 10, os apps têm uma visualização bruta limitada do sistema de arquivos, sem acesso direto a caminhos como <code>/sdcard/DCIM</code>. No entanto, os apps mantêm acesso bruto completo aos caminhos específicos do pacote, quando retornados por métodos aplicáveis, como <a href="https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)" class="external"><code>Context.getExternalFilesDir()</code></a>.
Os apps ainda têm acesso bruto completo aos caminhos específicos do pacote.</p>

<p>Use as <a href="/security/app-sandbox#guidelines-for-sharing-files">diretrizes para compartilhamentos de arquivos</a> no sandbox de apps para oferecer granularidade adequada de compartilhamento de dados.</p>

<h3 id="restrict_app_clipboard_access">Restringir o acesso à área de transferência do app</h3>

<p>No Android 10, o acesso à área de transferência foi alterado para que o conteúdo dela não possa ser observado chamando <a href="https://developer.android.com/reference/android/content/ClipboardManager.html#getPrimaryClip()" class="external"><code>ClipboardManager.getPrimaryClip</code></a> ou adicionando um listener <a href="https://developer.android.com/reference/android/content/ClipboardManager.OnPrimaryClipChangedListener" class="external"><code>onPrimaryClipChanged</code></a> para notificação quando a área de transferência é alterada. Isso aumenta a privacidade do usuário e impede que apps com malvertising modifiquem a área de transferência.</p>

<p>No Android 10, o acesso de leitura só é permitido ao app atual com foco de entrada ou ao teclado atual. A chamada de listener <a href="https://developer.android.com/reference/android/content/ClipboardManager.OnPrimaryClipChangedListener#public-methods_1" class="external"><code>ClipboardManager.onPrimaryClipChanged()</code></a> agora só é acionada para apps que atendem a essas restrições.
<a href="https://developer.android.com/reference/android/content/ClipboardManager.html#getPrimaryClip()" class="external"><code>ClipboardManager.getPrimaryClip</code></a> e <a href="https://developer.android.com/reference/android/content/ClipboardManager.html#getPrimaryClipDescription()" class="external"><code>ClipboardManager.getPrimaryClipDescription</code></a> retornarão <code>null</code> se o app solicitante não for o editor de método de entrada (IME, na sigla em inglês) padrão ou se ele não tiver foco de entrada.</p>

<h3 id="runtime_permissions_include_activity_recognition">Permissões de ambiente de execução incluem o reconhecimento de atividade</h3>

<p>Os usuários agora veem uma caixa de diálogo de reconhecimento de atividade quando um app acessa a localização do dispositivo em segundo plano. As permissões de ambiente de execução com fortes restrições precisam estar corretamente incluídas na lista de permissões no Android 10.</p>

<h3 id="manage_device_admins_permission">Permissão MANAGE_DEVICE_ADMINS</h3>

<p>O Android 10 altera a permissão <a href="https://android.googlesource.com/platform/frameworks/base/+/master/core/res/AndroidManifest.xml" class="external"><code>MANAGE_DEVICE_ADMINS</code></a> de assinatura ou privilegiada para somente assinatura. Isso significa que apenas apps assinados por plataforma podem definir outros apps como administradores de um dispositivo.</p>

<h3 id="sharing_api_improvements">Melhorias de compartilhamento de API</h3>

<p>O Android 10 oferece vários <a href="https://developer.android.com/preview/features/sharing" class="external">novos recursos da API Android Platform relacionados a compartilhamento</a>.
Se você modificou o código Share Sheet na sua implementação, verifique se ela é compatível com esses novos recursos. Se você não modificou o código Share Sheet na sua implementação, não precisa fazer nada para oferecer compatibilidade com esses novos recursos.</p>

<h2 id="android_runtime_art">Android Runtime (ART)</h2>

<h3 id="signed_config">Configuração assinada</h3>

<p>O recurso <a href="/devices/tech/dalvik/signed-config">Configuração assinada</a> permite incorporar a configuração de restrições de interface que não sejam SDK em APKs. Isso permite remover interfaces não SDK específicas da lista de proibições para que o AndroidX possa usá-las com segurança. Com essa alteração, o AndroidX pode adicionar compatibilidade com novos recursos em versões mais antigas do Android.</p>

<h2 id="performance">Desempenho</h2>

<h3 id="cgroup_abstraction_layer">Camada de abstração Cgroup</h3>

<p>O Android 10 inclui uma <a href="/devices/tech/perf/cgroups">camada de abstração cgroup</a> e perfis de tarefas, que os desenvolvedores podem usar para descrever um conjunto de restrições a serem aplicadas a uma linha de execução ou a um processo.</p>

<h3 id="low_memory_killer_daemon_lmkd">Low Memory Killer Daemon (lmkd)</h3>

<p>O Android 10 é compatível com um novo <a href="/devices/tech/perf/lmkd">modo <code>lmkd</code></a> que usa monitores de informação de pouca pressão (PSI, na sigla em inglês) do kernel para detecção de pressão da memória.</p>

<h2 id="power">Energia</h2>

<h3 id="platform_power_management">Gerenciamento de energia da plataforma</h3>

<p>No Android 10, o <a href="/devices/tech/power/platform_mgmt">modo Soneca</a> pode ser habilitado em dispositivos sempre ativados e em dispositivos que funcionam à bateria.</p>

<h3 id="routine_battery_saver">Economia de bateria de rotina</h3>

<p>O Android 10 introduz uma nova opção de programação para economia de bateria chamada <strong>baseada em rotina</strong>.
<a href="/devices/tech/power/routine-battery-saver">A economia de bateria de rotina</a> permite que um app escolhido pelo OEM dê sinais ao sistema para programar uma economia de bateria mais inteligente. Essa opção requer uma configuração, e a implementação dela é opcional.</p>

<h3 id="power_stats_hal">HAL de estatísticas de energia</h3>

<p>No Android 10, <a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/power/stats/1.0/IPowerStats.hal" class="external"><code>IPowerStats.hal</code></a> substitui as APIs de coleta de estatísticas de energia no <a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/power/1.3/IPower.hal" class="external"><code>IPower.hal</code></a>.
Embora a HAL de energia ainda seja compatível com as APIs, elas serão migradas exclusivamente para a HAL de estatísticas de energia no futuro.</p>

<p>A HAL de estatísticas de energia inclui novas APIs para oferecer compatibilidade com a coleta de dados da medição de energia no dispositivo, para dispositivos compatíveis. As APIs de coleta de estatísticas de energia já existentes também são atualizadas para melhorar a flexibilidade. As APIs de dicas de energia permanecem na HAL de energia e não serão alteradas.</p>

<h3 id="thermal_mitigation">Mitigação térmica</h3>

<p>O framework térmico no Android 10 abstrai as interfaces do dispositivo para o sensor de temperatura do subsistema térmico, incluindo CPU, GPU, bateria, skin e dispositivo de resfriamento. O framework introduz uma interface de pesquisa para consultar o status térmico a fim de iniciar a limitação e uma interface de callback para enviar uma mensagem ao usuário quando um limite é excedido.</p>

<p>O Android 10 fornece os novos tipos de dados por meio da interface <code>IThermalService</code> usando estes três novos métodos:</p>

<ul>
<li><a href="https://developer.android.com/reference/android/os/PowerManager#getCurrentThermalStatus()" class="external"><code>getCurrentThermalStatus()</code></a> retorna o status térmico atual do dispositivo como um número inteiro, a menos que o dispositivo esteja passando por uma limitação.</li>
<li><a href="https://developer.android.com/reference/android/os/PowerManager#addThermalStatusListener(android.os.PowerManager.OnThermalStatusChangedListener)" class="external"><code>addThermalStatusListener()</code></a> adiciona um listener.</li>
<li><a href="https://developer.android.com/reference/android/os/PowerManager#removeThermalStatusListener(android.os.PowerManager.OnThermalStatusChangedListener)" class="external"><code>removeThermalStatusListener()</code></a> remove um listener adicionado anteriormente.</li>
</ul>

<p>Os apps adicionam e removem listeners e acessam o status da temperatura na classe <a href="https://developer.android.com/reference/android/os/PowerManager" class="external"><code>PowerManager</code></a>. Somente um serviço de sistema confiável, como uma API Android ou API do fabricante do dispositivo, pode acessar informações sobre eventos causais associados. Os fabricantes de dispositivos ou fabricantes de SoC precisam implementar <code>thermal HAL 2.0</code> para permitir a funcionalidade completa do novo framework térmico.</p>

<p>Para ver um exemplo de implementação de mitigação térmica, consulte a <a href="https://android.googlesource.com/platform/hardware/google/pixel/+/refs/heads/master/thermal/" class="external">Implementação de referência</a> (link em inglês).</p>

<h2 id="updates">Atualizações</h2>

<h3 id="apex_file_format">Formato de arquivo APEX</h3>

<p><a href="/devices/tech/ota/apex">Android Pony EXpress (APEX)</a> é um novo formato de contêiner usado no fluxo de instalação para componentes modulares do sistema.</p>

<h3 id="dynamic_partitions">Partições dinâmicas</h3>

<p>As <a href="/devices/tech/ota/dynamic_partitions">partições dinâmicas</a> introduzem no Android um sistema de particionamento no espaço do usuário, permitindo que partições sejam criadas, redimensionadas ou destruídas durante as atualizações OTA. Os fabricantes de dispositivos não precisam se preocupar com os tamanhos individuais das partições, como <code>system</code>, <code>vendor</code> e <code>product</code>. Em vez disso, uma grande partição <code>super</code> é alocada, e as subpartições podem ser dimensionadas dinamicamente dentro dela.</p>

<h3 id="dynamic_system_updates">Atualizações dinâmicas do sistema</h3>

<p>O recurso <a href="/devices/tech/ota/dynamic-system-updates">Atualizações dinâmicas do sistema (DSU, na sigla em inglês)</a> permite criar uma imagem do sistema Android que os usuários podem transferir por download e testar sem o risco de corromper a imagem atual do sistema.</p>

<h3 id="multiuser_backup_and_restore">Backup e restauração de vários usuários</h3>

<p>O Android 10 é compatível com a funcionalidade de <a href="https://developer.android.com/reference/android/app/backup/package-summary" class="external">backup e restauração</a> para todos os usuários em um dispositivo. Anteriormente, o backup e a restauração estavam disponíveis apenas para o usuário do sistema. O backup e a restauração para usuários que não são do sistema ficam desativados por padrão, porque têm apenas cobertura parcial para configurações, plano de fundo e componentes do sistema.</p>

<h3 id="overlayfs">Overlayfs</h3>

<p>Os usuários que trabalham com versões <code>userdebug</code> ou <code>eng</code> esperam poder reativar com eficiência a partição do sistema como leitura/gravação e, em seguida, adicionar ou modificar qualquer número de arquivos sem atualizar a imagem do sistema. Você pode usar <code>Overlayfs</code>, que configura automaticamente o armazenamento de backup para um sistema de arquivos gravável como uma referência superior e é ativado sobre a inferior. Essas ações acontecem nas solicitações <code>adb disable-verity</code> e <code>adb remount</code>. Para ver mais detalhes, consulte o <a href="https://android.googlesource.com/platform/system/core/+/a9a3b73163fda5abf237cc0f0cee97ff33e6254d/fs_mgr/README.overlayfs.md" class="external">README de Overlayfs</a> (link em inglês) no AOSP.</p>

<h3 id="shared_library_support_in_recovery_mode">Compatibilidade com bibliotecas compartilhadas no modo de recuperação</h3>

<p>No Android 10, as bibliotecas compartilhadas estão disponíveis na partição de recuperação, o que elimina a necessidade de todos os executáveis do modo de recuperação serem estáticos. As bibliotecas compartilhadas estão localizadas no diretório <code>/system/lib</code> (ou <code>/system/lib64</code> para dispositivos de 64 bits) na partição.</p>

<p>Para adicionar uma nova biblioteca compartilhada à partição de recuperação, adicione <code>recovery_available: true</code> ou <code>recovery: true</code> ao <code>Android.bp</code> da biblioteca compartilhada. O primeiro instala a biblioteca nas partições do sistema e de recuperação, enquanto o último a instala apenas na partição de recuperação.</p>

<p>A compatibilidade com bibliotecas compartilhadas não pode ser criada com um sistema de compilação baseado em Make do Android.
Para converter um executável estático já existente do modo de recuperação em dinâmico, remova <code>LOCAL_FORCE_STATIC_EXECUTABLE := true</code> em <code>Android.mk</code> ou <code>static_executable: true</code> (em <code>Android.bp</code>).</p>

<h3 id="user_data_checkpoint_udc">Checkpoint de dados do usuário</h3>

<p>O Android 10 introduz o recurso <a href="/devices/tech/ota/user-data-checkpoint">Checkpoint de dados do usuário (UDC, na sigla em inglês)</a>, que permite que o Android seja revertido ao estado anterior quando uma atualização OTA falha.</p>

</body></html>