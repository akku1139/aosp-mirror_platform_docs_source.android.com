<html devsite><head>
    <title>Referência do comando do repo</title>
    <meta name="project_path" value="/_project.yaml"/>
    <meta name="book_path" value="/_book.yaml"/>
  </head>
  <body>

  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p>O repo complementa o Git simplificando o trabalho em vários repositórios. Consulte <a href="/setup/develop">Ferramentas de controle de origem</a> para saber mais sobre a relação entre o Repo e o Git. Para mais detalhes sobre o Repo, consulte o <a href="https://gerrit.googlesource.com/git-repo/+/refs/heads/master/README.md">README do Repo</a> (link em inglês).</p>

<p>O uso do Repo assume o seguinte formato: </p>
<pre class="devsite-terminal devsite-click-to-copy">
repo <var>command options</var>
</pre>
<p>Os elementos opcionais são mostrados entre colchetes [ ]. Por exemplo, muitos comandos aceitam <var>project-list</var> como um argumento. Você pode especificar <var>project-list</var> como uma lista de nomes ou uma lista de caminhos para os diretórios de origem locais dos projetos:</p>
<pre class="devsite-click-to-copy">
<code class="devsite-terminal">repo sync [<var>project0 project1 ... projectn</var>]</code>
<code class="devsite-terminal">repo sync [<var>/path/to/project0 ... /path/to/projectn</var>]</code>
</pre>

<h2 id="help">help</h2>
<p>Quando o repo estiver instalado, você poderá encontrar a documentação mais recente, começando com um resumo de todos os comandos, executando:</p>
<pre class="devsite-terminal devsite-click-to-copy">
repo help
</pre>
<p>Encontre informações sobre qualquer comando executando isto em uma árvore de repo:</p>
<pre class="devsite-terminal devsite-click-to-copy">
repo help <var>command</var>
</pre>

<p>O comando a seguir, por exemplo, produz uma descrição e uma lista de opções para o argumento <code>init</code> do repo, que inicializa o repo no diretório atual. Consulte <a href="#init">init</a> para ver mais detalhes.</p>
<pre class="devsite-terminal devsite-click-to-copy">
repo help init
</pre>

<h2 id="init">init</h2>
<pre class="devsite-terminal devsite-click-to-copy">repo init -u <var>url</var> [<var>options</var>]
</pre>
<p>Instala o repo no diretório atual. Isso cria um diretório <code>.repo/</code> com repositórios Git para o código-fonte do repo e os arquivos padrão de manifesto do Android. O diretório <code>.repo/</code> também contém <code>manifest.xml</code>, que é um symlink para o manifesto selecionado no diretório <code>.repo/manifests/</code>. Consulte <a href="https://gerrit.googlesource.com/git-repo/+/master/docs/manifest-format.md" class="external">manifest-format.md</a> para ver instruções sobre como atualizar o manifesto.</p>
<p>Opções:</p>
<ul>
<li><code>-u</code>: especifica um URL a partir do qual é possível recuperar um repositório de manifesto. O manifesto comum é encontrado em <code>https://android.googlesource.com/platform/manifest</code>.</li>
<li><code>-m</code>: seleciona um arquivo de manifesto no repositório. Se nenhum nome de manifesto for selecionado, o padrão será <code>default.xml</code>. </li>
<li><code>-b</code>: especifica uma revisão, isto é, um <var>manifest-branch</var> específico.</li>
</ul>
<p class="note"><strong>Observação</strong>: para todos os comandos Repo restantes, o diretório de trabalho atual precisa ser o diretório pai de <code>.repo/</code> ou um subdiretório do diretório pai.</p>

<h2 id="sync">sync</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo sync [<var>project-list</var>]
</pre>
<p>Faz o download de novas alterações e atualiza os arquivos de trabalho no ambiente local. Se você executa <code>repo sync</code> sem nenhum argumento, ele sincroniza os arquivos para todos os projetos.</p>
<p>Quando você executa <code>repo sync</code>, acontece o seguinte:</p>
<ul>
<li>
<p>Se o projeto nunca foi sincronizado, o <code>repo sync</code> será equivalente ao <code>git clone</code>. Todos os branches do repositório remoto são copiados para o diretório do projeto local.</p>
</li>
<li>
<p>Se o projeto já foi sincronizado uma vez, o <code>repo sync</code> é equivalente a:</p>
<pre><code>git remote update
git rebase origin/<var>branch</var>
</code></pre>
<p>onde <code>branch</code> é o branch recebido no momento no diretório do projeto local. Se o branch local não estiver rastreando um branch no repositório remoto, nenhuma sincronização ocorrerá no projeto.</p>
</li>
<li>
<p>Se a operação de realocação do Git resultar em conflitos de mesclagem, use os comandos normais do Git (por exemplo, <code>git rebase --continue</code>) para resolver os conflitos.</p>
</li>
</ul>
<p>Após uma execução bem-sucedida de <code>repo sync</code>, o código será atualizado nos projetos especificados e sincronizado com o código no repositório remoto.</p>
<p>Opções:</p>
<ul>
<li>
<p><code>-d</code>: alterna os projetos especificados de volta para a revisão de manifesto. É útil se o projeto está em um branch de tópicos no momento, mas a revisão de manifesto é temporariamente necessária.</p>
</li>
<li>
<p><code>-s</code>: sincroniza para uma versão válida conhecida, conforme especificado pelo elemento <var>manifest-server</var> no manifesto atual.</p>
</li>
<li>
<p><code>-f</code>: prossegue com a sincronização de outros projetos mesmo que a sincronização de um projeto falhe.</p>
</li>
</ul>

<h2 id="upload">upload</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo upload [<var>project-list</var>]
</pre>
<p>Para os projetos especificados, o repo compara os branches locais com os branches remotos atualizados durante a última sincronização do repo. O repo solicita que você selecione um ou mais branches que não foram enviados para análise.</p>
<p>Depois disso, todas as confirmações dos branches selecionados são transmitidas para o Gerrit por uma conexão HTTPS. É preciso configurar uma senha HTTPS para ativar a autorização de upload. Visite o <a href="https://android-review.googlesource.com/new-password" class="external">Gerador de senhas</a> para gerar um novo par de nome de usuário/senha para usar em HTTPS.</p>
<p>Quando o Gerrit recebe os dados do objeto no servidor, ele transforma cada confirmação em uma alteração para que os revisores possam comentar em cada uma delas.
Para combinar várias confirmações de <em>checkpoint</em> em uma única confirmação, use <code>git rebase -i</code> antes de fazer upload.</p>
<p>Se você executar <code>repo upload</code> sem nenhum argumento, ele pesquisará todos os projetos em busca de alterações no upload.</p>
<p>Para editar as alterações após o upload, use uma ferramenta como <code>git rebase -i</code> ou <code>git commit --amend</code> para atualizar suas confirmações locais. Depois que suas edições forem concluídas:</p>
<ul>
<li>verifique se o branch atualizado é o branch recebido atual;</li>
<li>para cada confirmação na série, insira o código de alteração do Gerrit entre colchetes:<br />
<pre><code># Replacing from branch foo
[ 3021 ] 35f2596c Refactor part of GetUploadableBranches to lookup one specific...
[ 2829 ] ec18b4ba Update proto client to support patch set replacments
# Insert change numbers in the brackets to add a new patch set.
# To create a new change record, leave the brackets empty.
</code></pre>
</li>
</ul>
<p>Depois que o upload for concluído, as alterações terão um conjunto de patches complementar.</p>
<p>Se você quiser fazer upload apenas do branch do Git recebido no momento, use o sinalizador <code>--current-branch</code> (ou a abreviação <code>--cbr</code>).</p>

<h2 id="diff">diff</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo diff [<var>project-list</var>]
</pre>
<p>Mostra mudanças pendentes entre a confirmação e a árvore de trabalho usando o <code>git diff</code>.</p>

<h2 id="download">download</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo download <var>target change</var>
</pre>
<p>Faz o download da alteração especificada no sistema de revisão e a disponibiliza no diretório de trabalho local do seu projeto.</p>
<p>Por exemplo, para fazer o download da <a href="https://android-review.googlesource.com/23823" class="external">alteração 23823</a> para seu diretório de plataforma/versão:</p>
<pre class="devsite-terminal devsite-click-to-copy">
repo download platform/build 23823
</pre>
<p>A execução do <code>repo sync</code> remove quaisquer confirmações recuperadas com o <code>repo download</code>. Ou você pode receber o branch remoto com <code>git checkout m/master</code>.</p>
<p class="note"><strong>Observação</strong>: há atrasos de replicação para todos os servidores do mundo, então há um pequeno atraso no espelhamento entre o instante em que uma alteração fica visível na Web no <a href="https://android-review.googlesource.com/">Gerrit</a> (link em inglês) e aquele em que o <code>repo download</code> consegue encontrá-la para todos os usuários.</p>

<h2 id="forall">forall</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo forall [<var>project-list</var>] -c <var>command</var>
</pre>
<p>Executa o comando shell fornecido em cada projeto. As seguintes variáveis de ambiente adicionais são disponibilizadas pelo <code>repo forall</code>:</p>
<ul>
<li>
<p><code>REPO_PROJECT</code> é definido como o nome exclusivo do projeto.</p>
</li>
<li>
<p><code>REPO_PATH</code> é o caminho relativo para a raiz do cliente.</p>
</li>
<li>
<p><code>REPO_REMOTE</code> é o nome do sistema remoto do manifesto.</p>
</li>
<li>
<p><code>REPO_LREV</code> é o nome da revisão do manifesto, traduzido em um branch de rastreamento local. Use-o se você precisar passar a revisão de manifesto para um comando Git executado localmente.</p>
</li>
<li>
<p><code>REPO_RREV</code> é o nome da revisão do manifesto, exatamente como está escrito nele.</p>
</li>
</ul>
<p>Opções:</p>
<ul>
<li>
<p><code>-c</code>: comando e argumentos a serem executados. O comando é avaliado por meio de <code>/bin/sh</code> e qualquer argumento depois dele é passado como parâmetro de posicionamento do shell.</p>
</li>
<li>
<p><code>-p</code>: mostra os cabeçalhos do projeto antes da saída do comando especificado. Isso é conseguido com a vinculação de pipes aos streams stdin, stdout e sterr do comando e com o encadeamento de toda a saída para um stream contínuo, que é exibido em uma sessão de uma única página.</p>
</li>
<li>
<p><code>-v</code>: mostra as mensagens que o comando escreve para stderr.</p>
</li>
</ul>

<h2 id="prune">prune</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo prune [<var>project-list</var>]
</pre>
<p>Descarta (exclui) tópicos que já estão mesclados.</p>

<h2 id="start">start</h2>
<pre class="devsite-terminal devsite-click-to-copy">repo start
<var>branch-name</var> [<var>project-list</var>]</pre>
<p>Inicia um novo branch para desenvolvimento, começando pela revisão especificada no manifesto.</p>
<p>O argumento <code>BRANCH_NAME</code> fornece uma breve descrição da alteração que você está tentando fazer nos projetos. Se você não sabe, considere usar o nome <code>default</code>.</p>
<p>O argumento <code>project-list</code> especifica quais projetos participam desse branch de tópico. </p>
<p class="note"><strong>Observação</strong>: um ponto ( . ) é um atalho para o projeto no diretório de trabalho atual.</p>

<h2 id="status">status</h2>
<pre class="devsite-terminal devsite-click-to-copy">
repo status [<var>project-list</var>]
</pre>
<p>Compara a árvore de trabalho à área de preparo (índice) e à confirmação mais recente nesse branch (HEAD) em cada projeto especificado. Exibe uma linha de resumo para cada arquivo em que há uma diferença entre esses três estados.</p>
<p>Para ver o status apenas para o branch atual, execute <code>repo status</code>. As informações de status são listadas por projeto. Para cada arquivo no projeto, é usado um código de duas letras.</p>
<p>Na primeira coluna, uma letra maiúscula indica como a área de organização difere do último estado confirmado.</p>
<table>
<thead>
<tr>
<th>Letra</th>
<th>Significado</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>Sem alterações</td>
<td>O mesmo no HEAD e no índice</td>
</tr>
<tr>
<td>A</td>
<td>Adicionado</td>
<td>Ausente no HEAD, mas presente no índice</td>
</tr>
<tr>
<td>M</td>
<td>Modificado</td>
<td>Presente no HEAD, modificado no índice</td>
</tr>
<tr>
<td>D</td>
<td>Excluído</td>
<td>Presente no HEAD, mas não no índice</td>
</tr>
<tr>
<td>R</td>
<td>Renomeado</td>
<td>Ausente no HEAD, caminho alterado no índice</td>
</tr>
<tr>
<td>C</td>
<td>Copiado</td>
<td>Ausente no HEAD, copiado de outro no índice</td>
</tr>
<tr>
<td>T</td>
<td>Modo alterado</td>
<td>Mesmo conteúdo no HEAD e no índice, modo alterado</td>
</tr>
<tr>
<td>U</td>
<td>Não mesclado</td>
<td>Conflito entre o HEAD e o índice, resolução necessária</td>
</tr>
</tbody>
</table>
<p>Na segunda coluna, uma letra minúscula indica como o diretório de trabalho é diferente do índice.</p>
<table>
<thead>
<tr>
<th>Letra</th>
<th>Significado</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr>
<td>-</td>
<td>Novo/desconhecido</td>
<td>Ausente no índice, presente na árvore de trabalho</td>
</tr>
<tr>
<td>m</td>
<td>Modificado</td>
<td>Presente no índice e na árvore de trabalho, modificado</td>
</tr>
<tr>
<td>d</td>
<td>Excluído</td>
<td>Presente no índice, mas não na árvore de trabalho</td>
</tr>
</tbody>
</table>

</body></html>