<!DOCTYPE html>
<html devsite>
<head>
  <title>Android Hardware Abstraction Layer: GnssClock Struct Reference</title>
  <meta name="project_path" value="/_project.yaml" />
  <meta name="book_path" value="/_book.yaml" />
  <meta name="hide_page_heading" value="true" />
</head>
<body>
  <div id="top"><!-- do not remove this div --></div>
  <h1><div class="title">GnssClock Struct Reference</div></h1>

<div id="doc-content">
<div class="header">
 <div class="summary">
  <a href="#pub-attribs">
   Data Fields
  </a>
 </div>
 <div class="headertitle">
  <div class="title">
   GnssClock Struct Reference
  </div>
 </div>
</div>
<!--header-->
<div class="contents">
 <p>
  <code>
   #include &lt;
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
    gps.h
   </a>
   &gt;
  </code>
 </p>
 <table class="memberdecls">
  <tr class="heading">
   <td colspan="2">
    <h2 class="groupheader">
     <a name="pub-attribs">
     </a>
     Data Fields
    </h2>
   </td>
  </tr>
  <tr class="memitem:a854352f53b148adc24983a58a1866d66">
   <td class="memItemLeft" align="right" valign="top">
    size_t&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a854352f53b148adc24983a58a1866d66">
     size
    </a>
   </td>
  </tr>
  <tr class="separator:a854352f53b148adc24983a58a1866d66">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a92aeecd1c1977e52f16e8811ac07de95">
   <td class="memItemLeft" align="right" valign="top">
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     GnssClockFlags
    </a>
    &#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a92aeecd1c1977e52f16e8811ac07de95">
     flags
    </a>
   </td>
  </tr>
  <tr class="separator:a92aeecd1c1977e52f16e8811ac07de95">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a0be0c6b4af7d8b14026169069b3671a3">
   <td class="memItemLeft" align="right" valign="top">
    int16_t&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a0be0c6b4af7d8b14026169069b3671a3">
     leap_second
    </a>
   </td>
  </tr>
  <tr class="separator:a0be0c6b4af7d8b14026169069b3671a3">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ae01a9bb132d27d2dd3a346685fd82d8d">
   <td class="memItemLeft" align="right" valign="top">
    int64_t&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#ae01a9bb132d27d2dd3a346685fd82d8d">
     time_ns
    </a>
   </td>
  </tr>
  <tr class="separator:ae01a9bb132d27d2dd3a346685fd82d8d">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a6bf7e753a85af8dc4def543c817f110d">
   <td class="memItemLeft" align="right" valign="top">
    double&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a6bf7e753a85af8dc4def543c817f110d">
     time_uncertainty_ns
    </a>
   </td>
  </tr>
  <tr class="separator:a6bf7e753a85af8dc4def543c817f110d">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ab89cb961b4ea82534fb36f8386cec1ad">
   <td class="memItemLeft" align="right" valign="top">
    int64_t&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#ab89cb961b4ea82534fb36f8386cec1ad">
     full_bias_ns
    </a>
   </td>
  </tr>
  <tr class="separator:ab89cb961b4ea82534fb36f8386cec1ad">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:afe993ecde06695fc82a0dcdf69062152">
   <td class="memItemLeft" align="right" valign="top">
    double&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#afe993ecde06695fc82a0dcdf69062152">
     bias_ns
    </a>
   </td>
  </tr>
  <tr class="separator:afe993ecde06695fc82a0dcdf69062152">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a4df08759fd9c5e885d97bed0a7f628c5">
   <td class="memItemLeft" align="right" valign="top">
    double&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a4df08759fd9c5e885d97bed0a7f628c5">
     bias_uncertainty_ns
    </a>
   </td>
  </tr>
  <tr class="separator:a4df08759fd9c5e885d97bed0a7f628c5">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ac8ba695fc921a7f630265b8d887dcc11">
   <td class="memItemLeft" align="right" valign="top">
    double&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#ac8ba695fc921a7f630265b8d887dcc11">
     drift_nsps
    </a>
   </td>
  </tr>
  <tr class="separator:ac8ba695fc921a7f630265b8d887dcc11">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a77fe55e0f989ea2be626a85497048828">
   <td class="memItemLeft" align="right" valign="top">
    double&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a77fe55e0f989ea2be626a85497048828">
     drift_uncertainty_nsps
    </a>
   </td>
  </tr>
  <tr class="separator:a77fe55e0f989ea2be626a85497048828">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a319985253312b0c497fa0c697c68f3fe">
   <td class="memItemLeft" align="right" valign="top">
    uint32_t&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="struct_gnss_clock.html#a319985253312b0c497fa0c697c68f3fe">
     hw_clock_discontinuity_count
    </a>
   </td>
  </tr>
  <tr class="separator:a319985253312b0c497fa0c697c68f3fe">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
 </table>
 <a name="details" id="details">
 </a>
 <h2 class="groupheader">
  Detailed Description
 </h2>
 <div class="textblock">
  <p>
   Represents an estimate of the GPS clock time.
  </p>
  <p>
   Definition at line
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
    1455
   </a>
   of file
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
    gps.h
   </a>
   .
  </p>
 </div>
 <h2 class="groupheader">
  Field Documentation
 </h2>
 <a class="anchor" id="afe993ecde06695fc82a0dcdf69062152">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      double bias_ns
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Sub-nanosecond bias. The error estimate for the sum of this and the full_bias_ns is the bias_uncertainty_ns
   </p>
   <p>
    If the data is available 'flags' must contain GNSS_CLOCK_HAS_BIAS. If GPS has computed a position fix. This value is mandatory if the receiver has estimated GPS time.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1534
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a4df08759fd9c5e885d97bed0a7f628c5">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      double bias_uncertainty_ns
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    1-Sigma uncertainty associated with the local estimate of GPS time (clock bias) in nanoseconds. The uncertainty is represented as an absolute (single sided) value.
   </p>
   <p>
    If the data is available 'flags' must contain GNSS_CLOCK_HAS_BIAS_UNCERTAINTY. This value is mandatory if the receiver has estimated GPS time.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1545
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ac8ba695fc921a7f630265b8d887dcc11">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      double drift_nsps
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    The clock's drift in nanoseconds (per second).
   </p>
   <p>
    A positive value means that the frequency is higher than the nominal frequency, and that the (full_bias_ns + bias_ns) is growing more positive over time.
   </p>
   <p>
    The value contains the 'drift uncertainty' in it. If the data is available 'flags' must contain GNSS_CLOCK_HAS_DRIFT.
   </p>
   <p>
    This value is mandatory if the receiver has estimated GNSS time
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1559
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a77fe55e0f989ea2be626a85497048828">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      double drift_uncertainty_nsps
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    1-Sigma uncertainty associated with the clock's drift in nanoseconds (per second). The uncertainty is represented as an absolute (single sided) value.
   </p>
   <p>
    If the data is available 'flags' must contain GNSS_CLOCK_HAS_DRIFT_UNCERTAINTY. If GPS has computed a position fix this field is mandatory and must be populated.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1569
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a92aeecd1c1977e52f16e8811ac07de95">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
       GnssClockFlags
      </a>
      flags
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    A set of flags indicating the validity of the fields in this data structure.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1463
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ab89cb961b4ea82534fb36f8386cec1ad">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int64_t full_bias_ns
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    The difference between hardware clock ('time' field) inside GPS receiver and the true GPS time since 0000Z, January 6, 1980, in nanoseconds.
   </p>
   <p>
    The sign of the value is defined by the following equation: local estimate of GPS time = time_ns - (full_bias_ns + bias_ns)
   </p>
   <p>
    This value is mandatory if the receiver has estimated GPS time. If the computed time is for a non-GPS constellation, the time offset of that constellation to GPS has to be applied to fill this value. The error estimate for the sum of this and the bias_ns is the bias_uncertainty_ns, and the caller is responsible for using this uncertainty (it can be very large before the GPS time has been solved for.) If the data is available 'flags' must contain GNSS_CLOCK_HAS_FULL_BIAS.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1523
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a319985253312b0c497fa0c697c68f3fe">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      uint32_t hw_clock_discontinuity_count
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    When there are any discontinuities in the HW clock, this field is mandatory.
   </p>
   <p>
    A "discontinuity" is meant to cover the case of a switch from one source of clock to another. A single free-running crystal oscillator (XO) should generally not have any discontinuities, and this can be set and left at 0.
   </p>
   <p>
    If, however, the time_ns value (HW clock) is derived from a composite of sources, that is not as smooth as a typical XO, or is otherwise stopped &amp; restarted, then this value shall be incremented each time a discontinuity occurs. (E.g. this value may start at zero at device boot-up and increment each time there is a change in clock continuity. In the unlikely event that this value reaches full scale, rollover (not clamping) is required, such that this value continues to change, during subsequent discontinuity events.)
   </p>
   <p>
    While this number stays the same, between
    <a class="el" href="struct_gnss_clock.html">
     GnssClock
    </a>
    reports, it can be safely assumed that the time_ns value has been running continuously, e.g. derived from a single, high quality clock (XO like, or better, that's typically used during continuous GNSS signal sampling.)
   </p>
   <p>
    It is expected, esp. during periods where there are few GNSS signals available, that the HW clock be discontinuity-free as long as possible, as this avoids the need to use (waste) a GNSS measurement to fully re-solve for the GPS clock bias and drift, when using the accompanying measurements, from consecutive
    <a class="el" href="struct_gnss_data.html">
     GnssData
    </a>
    reports.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1600
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a0be0c6b4af7d8b14026169069b3671a3">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int16_t leap_second
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Leap second data. The sign of the value is defined by the following equation: utc_time_ns = time_ns - (full_bias_ns + bias_ns) - leap_second * 1,000,000,000
   </p>
   <p>
    If the data is available 'flags' must contain GNSS_CLOCK_HAS_LEAP_SECOND.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1473
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a854352f53b148adc24983a58a1866d66">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      size_t size
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    set to sizeof(GnssClock)
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1457
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ae01a9bb132d27d2dd3a346685fd82d8d">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int64_t time_ns
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    The GNSS receiver internal clock value. This is the local hardware clock value.
   </p>
   <p>
    For local hardware clock, this value is expected to be monotonically increasing while the hardware clock remains power on. (For the case of a HW clock that is not continuously on, see the hw_clock_discontinuity_count field). The receiver's estimate of GPS time can be derived by substracting the sum of full_bias_ns and bias_ns (when available) from this value.
   </p>
   <p>
    This GPS time is expected to be the best estimate of current GPS time that GNSS receiver can achieve.
   </p>
   <p>
    Sub-nanosecond accuracy can be provided by means of the 'bias_ns' field. The value contains the 'time uncertainty' in it.
   </p>
   <p>
    This field is mandatory.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1494
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a6bf7e753a85af8dc4def543c817f110d">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      double time_uncertainty_ns
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    1-Sigma uncertainty associated with the clock's time in nanoseconds. The uncertainty is represented as an absolute (single sided) value.
   </p>
   <p>
    If the data is available, 'flags' must contain GNSS_CLOCK_HAS_TIME_UNCERTAINTY. This value is effectively zero (it is the reference local clock, by which all other times and time uncertainties are measured.) (And thus this field can be not provided, per GNSS_CLOCK_HAS_TIME_UNCERTAINTY flag, or provided &amp; set to 0.)
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     1506
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
     gps.h
    </a>
    .
   </p>
  </div>
 </div>
 <hr />
 The documentation for this struct was generated from the following file:
 <ul>
  <li>
   hardware/libhardware/include/hardware/
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/gps.h">
    gps.h
   </a>
  </li>
 </ul>
</div>
<!-- contents -->
</div>

</body>
</html>
